webpackJsonp([1],{0:function(t,e,a){t.exports=a("NHnr")},"0i3M":function(t,e){},"1nkg":function(t,e){},"2N7h":function(t,e){},"6pCo":function(t,e){},"8COd":function(t,e){},Bexm:function(t,e){},C2sM:function(t,e){},CJbz:function(t,e){},FhhI:function(t,e){},G3BA:function(t,e){},GEnR:function(t,e){},HHaZ:function(t,e){},HeGr:function(t,e){},HuO0:function(t,e){},Iwh9:function(t,e){},J2ew:function(t,e){},Jmt5:function(t,e){},JrfZ:function(t,e){},"L/xm":function(t,e){},Lm8f:function(t,e){},MAOu:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("/5sW"),n=a("Biqn"),o=a.n(n),s=a("kxiW"),r=a.n(s),l={saveAdd2HomeScreenChoice:function(t,e){r.a.firestore().collection("users_profile").doc(t).update({add2hsChoice:e})}},c=a("NYxO"),d={computed:o()({},Object(c["c"])({stateUid:function(t){return t.users.user.uid}})),mounted:function(){var t=this;this.$nextTick(function(){window.addEventListener("beforeinstallprompt",function(e){e.userChoice.then(function(e){l.saveAdd2HomeScreenChoice(t.stateUid,e.outcome)})})})}},u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"nav-open":t.$sidebar.showSidebar}},[a("notifications"),a("router-view")],1)},p=[],m=a("XyMi");function f(t){a("G3BA")}var h=!1,v=f,g=null,b=null,C=Object(m["a"])(d,u,p,h,v,g,b),w=C.exports,_=a("/ocq"),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)},$=[],x=null,k=!1,T=null,L=null,P=null,A=Object(m["a"])(x,y,$,k,T,L,P),E=A.exports,N=(a("VjuZ"),a("n12u"),a("EuXz"),{props:{uid:{type:String}},data:function(){return{activeNotifications:!1,notificationsList:[]}},computed:{routeName:function(){var t=this.$route.name;return this.capitalizeFirstLetter(t)}},created:function(){var t=this,e=function(e){r.a.firestore().collection("notifications").where("owner","==",e).orderBy("datetime","desc").onSnapshot(function(e){e.docChanges().forEach(function(e){"added"===e.type&&t.notificationsList.unshift(Object.assign(e.doc.data(),{id:e.doc.id})),"removed"===e.type&&(t.notificationsList=t.notificationsList.filter(function(t){return t.id!==e.doc.id}))})})};e(this.uid)},methods:{capitalizeFirstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},toggleNotificationDropDown:function(){this.activeNotifications=!this.activeNotifications},closeDropDown:function(){this.activeNotifications=!1},toggleSidebar:function(){this.$sidebar.displaySidebar(!this.$sidebar.showSidebar)},hideSidebar:function(){this.$sidebar.displaySidebar(!1)},onGoToSettings:function(){this.$router.replace("/dashboard/index/settings")},onGoToNotification:function(t){this.$router.replace(t.route)}}}),O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-expand-lg navbar-light"},[a("div",{staticClass:"container-fluid"},[a("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[t._v(t._s(t.routeName))]),a("button",{staticClass:"navbar-toggler navbar-burger",attrs:{type:"button","aria-expanded":t.$sidebar.showSidebar,"aria-label":"Toggle navigation"},on:{click:t.toggleSidebar}},[a("span",{staticClass:"navbar-toggler-bar"}),a("span",{staticClass:"navbar-toggler-bar"}),a("span",{staticClass:"navbar-toggler-bar"})]),a("div",{staticClass:"collapse navbar-collapse"},[a("ul",{staticClass:"navbar-nav ml-auto"},[a("drop-down",{staticClass:"nav-item",attrs:{isNotifications:!0,title:t.notificationsList.length+" Notificações","title-classes":"nav-link "+(t.notificationsList.length?"text-danger":""),icon:"ti-bell"}},[0===t.notificationsList.length?a("span",{staticClass:"dropdown-item"},[t._v("Nenhuma notificação")]):t._e(),t._l(t.notificationsList,function(e){return a("a",{key:e.id,staticClass:"dropdown-item notifications-item",attrs:{href:"#"},on:{click:function(a){t.onGoToNotification(e)}}},[t._v(t._s(e.msg+" na torre "+e.tower))])})],2),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:t.onGoToSettings}},[a("i",{staticClass:"ti-settings"}),a("p",[t._v("\n              Configurações\n            ")])])])],1)])])])},S=[];function D(t){a("8COd")}var U=!1,q=D,j=null,I=null,B=Object(m["a"])(N,O,S,U,q,j,I),F=B.exports,M={},V=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},z=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"footer"},[a("div",{staticClass:"container-fluid d-flex flex-wrap justify-content-between"},[a("nav",[a("ul",[a("li",[a("a",{attrs:{href:"http://www.stresscan.com"}},[t._v("Stresscan")])])])])])])}];function R(t){a("C2sM")}var G=!1,H=R,W=null,X=null,Y=Object(m["a"])(M,V,z,G,H,W,X),Z=Y.exports,J={},K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"container-fluid"},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1)])},Q=[];function tt(t){a("wRDj")}var et=!1,at=tt,it=null,nt=null,ot=Object(m["a"])(J,K,Q,et,at,it,nt),st=ot.exports,rt={},lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"nav navbar-nav nav-mobile-menu"},[t._t("default")],2)},ct=[];function dt(t){a("yAKT")}var ut=!1,pt=dt,mt=null,ft=null,ht=Object(m["a"])(rt,lt,ct,ut,pt,mt,ft),vt=ht.exports,gt={components:{TopNavbar:F,ContentFooter:Z,DashboardContent:st,MobileMenu:vt},data:function(){return{notificationsList:[]}},computed:o()({},Object(c["c"])({stateUsername:function(t){return t.users.user.username},stateIsAdmin:function(t){return t.users.user.isAdmin},stateUid:function(t){return t.users.user.uid}})),created:function(){var t=this,e=function(e){r.a.firestore().collection("notifications").where("owner","==",e).orderBy("datetime","desc").onSnapshot(function(e){e.docChanges().forEach(function(e){"added"===e.type&&t.notificationsList.unshift(Object.assign(e.doc.data(),{id:e.doc.id})),"removed"===e.type&&(t.notificationsList=t.notificationsList.filter(function(t){return t.id!==e.doc.id}))})})};e(this.stateUid)},methods:{toggleSidebar:function(){this.$sidebar.showSidebar&&this.$sidebar.displaySidebar(!1)},onGoToNotification:function(t){this.$router.replace(t.route)},onGoToSettings:function(){this.$sidebar.displaySidebar(!1),this.$router.replace("/dashboard/index/settings")}}},bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper",attrs:{id:"wrapper"}},[a("side-bar",{attrs:{title:t.stateUsername}},[a("template",{slot:"links"},[a("sidebar-link",{attrs:{to:"/dashboard/index",name:"Dashboard",icon:"ti-panel"}}),a("sidebar-link",{attrs:{to:"/dashboard/user-profile",name:"Meus Dados",icon:"ti-user"}}),t.stateIsAdmin?a("sidebar-link",{attrs:{to:"/dashboard/users",name:"Usuários",icon:"fa fa-users"}}):t._e()],1),a("mobile-menu",[a("drop-down",{staticClass:"nav-item",attrs:{hideArrow:!0,isMobileNotifications:!0,title:t.notificationsList.length+" Notificações","title-classes":"nav-link "+(t.notificationsList.length?"text-danger":""),icon:"ti-bell"}},[0===t.notificationsList.length?a("span",{staticClass:"dropdown-item"},[t._v("Nenhuma notificação")]):t._e(),t._l(t.notificationsList,function(e){return a("a",{key:e.id,staticClass:"dropdown-item notifications-item",attrs:{href:"#"},on:{click:function(a){t.onGoToNotification(e)}}},[t._v(t._s(e.msg))])})],2),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:t.onGoToSettings}},[a("i",{staticClass:"ti-settings"}),a("p",[t._v("Configurações")])])]),a("li",{staticClass:"divider"})],1)],2),a("div",{staticClass:"main-panel"},[a("top-navbar",{attrs:{uid:t.stateUid}}),a("dashboard-content",{nativeOn:{click:function(e){return t.toggleSidebar(e)}}}),a("content-footer")],1)],1)},Ct=[];function wt(t){a("iUT/"),a("XWz/")}var _t=!1,yt=wt,$t=null,xt=null,kt=Object(m["a"])(gt,bt,Ct,_t,yt,$t,xt),Tt=kt.exports,Lt={},Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contact-us full-screen"},[a("nav",{staticClass:"navbar navbar-ct-default",attrs:{role:"navigation-demo"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"navbar-header"},[t._m(0),a("router-link",{staticClass:"navbar-brand",attrs:{to:{path:"/"}}},[t._v("Site title")])],1),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navigation-example-2"}},[a("ul",{staticClass:"nav navbar-nav navbar-right"},[a("li",[a("router-link",{attrs:{to:{path:"/"}}},[t._v("Home")])],1)])])])]),t._m(1),a("footer",{staticClass:"footer-demo"},[a("div",{staticClass:"container"},[a("nav",{staticClass:"pull-left"},[a("ul",[a("li",[a("router-link",{attrs:{to:{path:"/"}}},[t._v("Home")])],1),a("li",[a("router-link",{attrs:{to:{path:"/register"}}},[t._v("Register")])],1)])]),t._m(2)])])])},At=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggle",attrs:{type:"button","data-toggle":"collapse","data-target":"#navigation-example-2"}},[a("span",{staticClass:"sr-only"},[t._v("Toggle navigation")]),a("span",{staticClass:"icon-bar"}),a("span",{staticClass:"icon-bar"}),a("span",{staticClass:"icon-bar"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper wrapper-full-page section content"},[a("div",{},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8 col-md-offset-2 text-center"},[a("h2",{staticClass:"title text-danger"},[t._v("Página não encontrada")]),a("h2",{staticClass:"title"},[t._v("Oops! Parece que essa página não existe.")])])])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"copyright pull-right"},[t._v("\n        © 2017, made with\n        "),a("i",{staticClass:"fa fa-heart heart"}),t._v(" by Paper admin\n      ")])}],Et=!1,Nt=null,Ot=null,St=null,Dt=Object(m["a"])(Lt,Pt,At,Et,Nt,Ot,St),Ut=Dt.exports,qt=(a("y9m4"),a("SldL"),a("7hDC")),jt=a.n(qt),It={data:function(){return{email:"",password:"",loading:!0,authenticating:!1,errorMessage:""}},created:function(){var t=jt()(regeneratorRuntime.mark(function t(){var e,a,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=function(){return new Promise(function(t){r.a.auth().onAuthStateChanged(function(e){t(e||null)})})},t.next=3,e();case 3:a=t.sent,a?r.a.firestore().collection("users_profile").doc(a.uid).get().then(function(t){t.exists?(i.updateUserLevel(t.data().isAdmin),i.updateUsername(t.data().username),i.updateUID(t.id),i.updatePushNotificationsEnable(t.data().push_notifications_enable),i.$router.replace("/dashboard")):(i.errorMessage="Perfil de usuário não encontrado",i.loading=!1)}):this.loading=!1;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:o()({},Object(c["b"])(["updateUserLevel","updateUsername","updateUID","updatePushNotificationsEnable"]),{onLogin:function(){var t=this;this.authenticating=!0,r.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(e){r.a.firestore().collection("users_profile").doc(e.user.uid).get().then(function(e){e.exists?(t.updateUserLevel(e.data().isAdmin),t.updateUsername(e.data().username),t.updateUID(e.id),t.updatePushNotificationsEnable(e.data().push_notifications_enable),t.$router.replace("/dashboard")):(t.authenticating=!1,t.errorMessage="Perfil de usuário não encontrado")})},function(e){t.authenticating=!1,t.errorMessage="Usuário e/ou senha inválido"})}})},Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-wrapper"},[t.loading?a("div",[t._v("Carregando...")]):t._e(),t.authenticating?a("div",[t._v("Autenticando...")]):t._e(),t.loading||t.authenticating?t._e():a("form",{on:{submit:function(e){return e.preventDefault(),t.onLogin(e)}}},[a("h1",[t._v("Login")]),t.errorMessage?a("p",{staticClass:"error-message"},[t._v(t._s(t.errorMessage))]):t._e(),a("label",{attrs:{for:"email"}},[t._v("email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"email",id:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),a("label",{attrs:{for:"pwd"}},[t._v("Senha")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",id:"pwd"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),a("button",{attrs:{type:"submit"}},[t._v("Entrar")])])])},Ft=[];function Mt(t){a("L/xm")}var Vt=!1,zt=Mt,Rt="data-v-3b59494d",Gt=null,Ht=Object(m["a"])(It,Bt,Ft,Vt,zt,Rt,Gt),Wt=Ht.exports,Xt={inheritAttrs:!1,name:"ss-fg-input",props:{label:String,value:[String,Number],addonRightIcon:String,addonLeftIcon:String,spinner:Boolean,uppercase:Boolean},computed:{hasIcon:function(){var t=this.$slots,e=t.addonRight,a=t.addonLeft;return void 0!==e||void 0!==a||void 0!==this.addonRightIcon||void 0!==this.addonLeftIcon}}},Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group",class:{"input-group":t.hasIcon}},[t._t("label",[t.label?a("label",{staticClass:"control-label"},[t._v("\n      "+t._s(t.label)+"\n    ")]):t._e()]),t._t("addonLeft",[t.addonLeftIcon?a("span",{staticClass:"input-group-prepend"},[a("i",{staticClass:"input-group-text",class:t.addonLeftIcon})]):t._e()]),a("input",t._b({staticClass:"form-control",class:{uppercase:t.uppercase},attrs:{"aria-describedby":"addon-right addon-left"},domProps:{value:t.value},on:{input:function(e){t.$emit("input",e.target.value)}}},"input",t.$attrs,!1)),t.spinner?a("div",{staticClass:"spinner"}):t._e(),t._t("default"),t._t("addonRight",[t.addonRightIcon?a("span",{staticClass:"input-group-append"},[a("i",{staticClass:"input-group-text",class:t.addonRightIcon})]):t._e()])],2)},Zt=[];function Jt(t){a("HeGr")}var Kt=!1,Qt=Jt,te=null,ee=null,ae=Object(m["a"])(Xt,Yt,Zt,Kt,Qt,te,ee),ie=ae.exports,ne={props:{tag:{type:String,default:"li"},isNotifications:{type:Boolean,default:!1},isMobileNotifications:{type:Boolean,default:!1},hideArrow:{type:Boolean,default:!1},title:String,icon:String,titleClasses:[String,Object,Array]},data:function(){return{isOpen:!1}},methods:{toggleDropDown:function(){this.isOpen=!this.isOpen,this.$emit("change",this.isOpen)},closeDropDown:function(){this.isOpen=!1,this.$emit("change",!1)}}},oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(t.tag,{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeDropDown,expression:"closeDropDown"}],tag:"component",staticClass:"dropdown",class:{show:t.isOpen},on:{click:t.toggleDropDown}},[a("a",{staticClass:"dropdown-toggle btn-rotate",class:t.titleClasses,attrs:{"data-toggle":"dropdown"}},[t._t("title",[a("i",{class:t.icon}),a("span",{staticClass:"notification"},[t._v(t._s(t.title)+"\n        "),a("b",{staticClass:"caret"})])])],2),a("ul",{staticClass:"dropdown-menu",class:{show:t.isOpen,"dropdown-notifications":t.isNotifications,"mobile-dropdown-notifications":t.isMobileNotifications,"hide-arrow":t.hideArrow}},[a("div",{staticClass:"dropdown-menu-wrapper"},[t._t("default")],2)])])},se=[];function re(t){a("Iwh9")}var le=!1,ce=re,de=null,ue=null,pe=Object(m["a"])(ne,oe,se,le,ce,de,ue),me=pe.exports;const fe={colorChecked:"#75C791",colorUnchecked:"#bfcbd9",cssColors:!1,labelChecked:"on",labelUnchecked:"off",width:50,height:22,margin:3,switchColor:"#fff"},he=(t,e)=>{return"object"===typeof t&&t.hasOwnProperty(e)},ve=t=>t+"px";var ge={name:"ToggleButton",props:{value:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:{type:String},sync:{type:Boolean,default:!1},speed:{type:Number,default:300},color:{type:[String,Object],validator(t){return"object"===typeof t?t.checked||t.unchecked:"string"===typeof t}},switchColor:{type:[String,Object],validator(t){return"object"===typeof t?t.checked||t.unchecked:"string"===typeof t}},cssColors:{type:Boolean,default:!1},labels:{type:[Boolean,Object],default:!1,validator(t){return"object"===typeof t?t.checked||t.unchecked:"boolean"===typeof t}},height:{type:Number,default:fe.height},width:{type:Number,default:fe.width}},computed:{className(){let{toggled:t,disabled:e}=this;return["vue-js-switch",{toggled:t,disabled:e}]},ariaChecked(){return this.toggled.toString()},coreStyle(){return{width:ve(this.width),height:ve(this.height),backgroundColor:this.cssColors?null:this.disabled?this.colorDisabled:this.colorCurrent,borderRadius:ve(Math.round(this.height/2))}},buttonRadius(){return this.height-2*fe.margin},distance(){return ve(this.width-this.height+fe.margin)},buttonStyle(){return{width:ve(this.buttonRadius),height:ve(this.buttonRadius),transition:`transform ${this.speed}ms`,transform:this.toggled?`translate3d(${this.distance}, 3px, 0px)`:null,background:this.switchColor?this.switchColorCurrent:void 0}},labelStyle(){return{lineHeight:ve(this.height)}},colorChecked(){let{color:t}=this;return"object"!==typeof t?t||fe.colorChecked:he(t,"checked")?t.checked:fe.colorChecked},colorUnchecked(){let{color:t}=this;return he(t,"unchecked")?t.unchecked:fe.colorUnchecked},colorDisabled(){let{color:t}=this;return he(t,"disabled")?t.disabled:this.colorCurrent},colorCurrent(){return this.toggled?this.colorChecked:this.colorUnchecked},labelChecked(){return he(this.labels,"checked")?this.labels.checked:fe.labelChecked},labelUnchecked(){return he(this.labels,"unchecked")?this.labels.unchecked:fe.labelUnchecked},switchColorChecked(){let{switchColor:t}=this;return he(t,"checked")?t.checked:fe.switchColor},switchColorUnchecked(){let{switchColor:t}=this;return he(t,"unchecked")?t.unchecked:fe.switchColor},switchColorCurrent(){let{switchColor:t}=this;return"object"!==typeof t?t||fe.switchColor:this.toggled?this.switchColorChecked:this.switchColorUnchecked}},watch:{value(t){this.sync&&(this.toggled=!!t)}},data(){return{toggled:!!this.value}},methods:{toggle(t){this.toggled=!this.toggled,this.$emit("input",this.toggled),this.$emit("change",{value:this.toggled,srcEvent:t})}}},be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{class:t.className,attrs:{role:"checkbox","aria-checked":t.ariaChecked}},[a("input",{staticClass:"v-switch-input",attrs:{type:"checkbox",name:t.name},on:{change:function(e){return e.stopPropagation(),t.toggle(e)}}}),a("div",{staticClass:"v-switch-core",style:t.coreStyle},[a("div",{staticClass:"v-switch-button",style:t.buttonStyle})]),t.labels?[t.toggled?a("span",{staticClass:"v-switch-label v-left",style:t.labelStyle,domProps:{innerHTML:t._s(t.labelChecked)}}):a("span",{staticClass:"v-switch-label v-right",style:t.labelStyle,domProps:{innerHTML:t._s(t.labelUnchecked)}})]:t._e()],2)},Ce=[];function we(t){a("xB5m")}var _e=!1,ye=we,$e="data-v-062c6859",xe=null,ke=Object(m["a"])(ge,be,Ce,_e,ye,$e,xe),Te=ke.exports,Le={name:"paper-table",components:{ToggleButton:Te},props:{editButton:{type:Boolean,default:!1},removeButton:{type:Boolean,default:!1},toggleCheckbox:{type:Boolean,default:!1},columns:Array,data:Array,type:{type:String,default:"striped"},title:{type:String,default:""},subTitle:{type:String,default:""},showheaders:{type:Boolean,default:!0},clickable:{type:Boolean,default:!1}},computed:{tableClass:function(){return"table-".concat(this.type)}},methods:{hasValue:function(t,e){return"undefined"!==t[e.toLowerCase()]},itemValue:function(t,e){return t[e.toLowerCase()]},onOpenData:function(t){this.$emit("openData",t)},onEditData:function(t){this.$emit("editData",t)},onRemoveData:function(t){this.$emit("removeData",t)},onToggleCheckbox:function(t){this.$emit("toggleCheckbox",t)}}},Pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"table",class:t.tableClass},[a("thead",[t.showheaders?t._t("columns",t._l(t.columns,function(e){return a("th",{key:e},[t._v(t._s(e))])})):t._e()],2),a("tbody",t._l(t.data,function(e,i){return a("tr",{key:i},[t._t("default",[t.toggleCheckbox?a("td",{staticClass:"custom-toggle-button"},[a("toggle-button",{on:{change:function(a){t.onToggleCheckbox(e)}},model:{value:e.enabled,callback:function(a){t.$set(e,"enabled",a)},expression:"item.enabled"}})],1):t._e(),t._l(t.columns,function(i,n){return t.hasValue(e,i)?a("td",{key:n,class:{clickable:t.clickable},on:{click:function(a){t.onOpenData(e.id)}}},[t._v("\n          "+t._s(t.itemValue(e,i))+"\n        ")]):t._e()}),t.editButton||t.removeButton?a("td",{staticClass:"action-buttons"},[t.editButton?a("a",{staticClass:"btn btn-sm btn-success mg-lf-xs",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.onEditData(e.id)}}},[a("i",{staticClass:"ti-pencil-alt"})]):t._e(),t.removeButton?a("a",{staticClass:"btn btn-sm btn-danger mg-lf-xs",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.onRemoveData(e.id)}}},[a("i",{staticClass:"ti-trash"})]):t._e()]):t._e()],{row:e})],2)}))])},Ae=[];function Ee(t){a("XDue")}var Ne=!1,Oe=Ee,Se=null,De=null,Ue=Object(m["a"])(Le,Pe,Ae,Ne,Oe,Se,De),qe=Ue.exports,je={name:"p-button",props:{tag:{type:String,default:"button"},round:Boolean,icon:Boolean,outline:Boolean,block:Boolean,loading:Boolean,disabled:Boolean,type:{type:String,default:"default"},nativeType:{type:String,default:"button"},size:{type:String,default:""},simple:Boolean}},Ie=function(){var t,e,a,i=this,n=i.$createElement,o=i._self._c||n;return o(i.tag,{tag:"component",staticClass:"btn",class:[{"btn-round":i.round},{"btn-block":i.block},{"btn-just-icon":i.icon},(t={},t["btn-"+i.type]=i.type&&!i.outline,t),(e={},e["btn-outline-"+i.type]=i.type&&i.outline,e),(a={},a["btn-"+i.size]=i.size,a),{"btn-link":i.simple}],attrs:{type:i.nativeType,disabled:i.disabled||i.loading}},[i._t("loading",[i.loading?o("i",{staticClass:"fa fa-spinner fa-spin"}):i._e()]),i._t("default")],2)},Be=[];function Fe(t){a("HHaZ")}var Me=!1,Ve=Fe,ze=null,Re=null,Ge=Object(m["a"])(je,Ie,Be,Me,Ve,ze,Re),He=Ge.exports,We={name:"card",props:{title:String,subTitle:String,disabled:Boolean,centerTitle:Boolean,cardBodyNegativeTop:Boolean}},Xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card",class:{opaque:t.disabled}},[t.$slots.image?a("div",{staticClass:"card-image"},[t._t("image")],2):t._e(),t.$slots.header||t.title?a("div",{staticClass:"card-header"},[t._t("header",[a("h4",{staticClass:"card-title",class:{"text-center":t.centerTitle}},[t._v(t._s(t.title))]),t.subTitle?a("p",{staticClass:"card-category"},[t._v(t._s(t.subTitle))]):t._e()]),a("div",{staticClass:"card-header-buttons"},[t._t("card-header-buttons")],2)],2):t._e(),t.$slots.default?a("div",{staticClass:"card-body",class:{"card-body-negative-top":t.cardBodyNegativeTop}},[t._t("default")],2):t._e(),t._t("raw-content"),t.$slots.footer?a("div",{staticClass:"card-footer"},[a("hr"),t._t("footer")],2):t._e()],2)},Ye=[];function Ze(t){a("Lm8f")}var Je=!1,Ke=Ze,Qe=null,ta=null,ea=Object(m["a"])(We,Xe,Ye,Je,Ke,Qe,ta),aa=ea.exports,ia={name:"chart-card",components:{Card:aa},props:{footerText:{type:String,default:""},title:{type:String,default:""},subTitle:{type:String,default:""},centerTitle:{type:Boolean,default:!1},chartType:{type:String,default:"Line"},chartOptions:{type:Object,default:function(){return{}}},chartResponsiveOptions:{type:Array,default:function(){return[]}},chartData:{type:Object,default:function(){return{labels:[],series:[]}}},cardBodyNegativeTop:Boolean},data:function(){return{chartId:"no-id"}},methods:{initChart:function(t){var e="#".concat(this.chartId);t[this.chartType](e,this.chartData,this.chartOptions,this.chartResponsiveOptions)},updateChartId:function(){var t=(new Date).getTime().toString(),e=this.getRandomInt(0,t);this.chartId="div_".concat(e)},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t}},mounted:function(){var t=this;this.updateChartId(),new Promise(function(t){t()}).then(a.bind(null,"715g")).then(function(e){var a=e.default||e;t.$nextTick(function(){t.initChart(a)})}),this.$nextTick(function(){setTimeout(function(){for(var t=document.querySelectorAll(".chart-temperature .ct-point"),e=t.length,a=0;a<e;a++)t[a].onmouseover=function(){document.querySelector(".chart-tooltip").style.opacity=1},t[a].onmouseout=function(){document.querySelector(".chart-tooltip").style.opacity=0};for(var i=document.querySelectorAll(".chart-humidity .ct-point"),n=i.length,o=0;o<n;o++)i[o].onmouseover=function(){document.querySelector(".chart-tooltip-humidity").style.opacity=1},i[o].onmouseout=function(){document.querySelector(".chart-tooltip-humidity").style.opacity=0}},1e3)})}},na=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("card",{attrs:{cardBodyNegativeTop:t.cardBodyNegativeTop}},[a("template",{slot:"header"},[t.$slots.title||t.title?a("h4",{staticClass:"card-title",class:{"text-center":t.centerTitle}},[t._t("title",[t._v("\n        "+t._s(t.title)+"\n      ")])],2):t._e(),a("p",{staticClass:"card-category",class:{"text-center":t.centerTitle}},[t._t("subTitle",[t._v("\n        "+t._s(t.subTitle)+"\n      ")])],2)]),a("div",[a("div",{staticClass:"ct-chart",attrs:{id:t.chartId}}),a("div",{staticClass:"footer"},[a("div",{staticClass:"chart-legend"},[t._t("legend")],2),a("hr"),a("div",{staticClass:"stats"},[t._t("footer")],2),a("div",{staticClass:"pull-right"})])])],2)},oa=[];function sa(t){a("JrfZ")}var ra=!1,la=sa,ca=null,da=null,ua=Object(m["a"])(ia,na,oa,ra,la,ca,da),pa=ua.exports,ma={name:"stats-card",props:{title:String,subtitle:String,centerTitle:Boolean,disabled:Boolean},components:{Card:aa}},fa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("card",{attrs:{disabled:t.disabled,title:t.title,"sub-title":t.subtitle,centerTitle:t.centerTitle}},[t._t("raw-content"),t.$slots.header||t.$slots.content?a("div",{staticClass:"row inside-card"},[t.$slots.header?a("div",{staticClass:"col-3"},[t._t("header")],2):t._e(),t.$slots.content?a("div",{staticClass:"col-9"},[t._t("content")],2):t._e()]):t._e(),t.$slots.footer?a("div",[a("hr"),t._t("footer")],2):t._e()],2)},ha=[];function va(t){a("J2ew")}var ga=!1,ba=va,Ca=null,wa=null,_a=Object(m["a"])(ma,fa,ha,ga,ba,Ca,wa),ya=_a.exports,$a={props:{moveY:{type:Number,default:0}},computed:{arrowStyle:function(){return{transform:"translate3d(0px, ".concat(this.moveY,"px, 0px)")}}}},xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"moving-arrow",style:t.arrowStyle})},ka=[];function Ta(t){a("YIr9")}var La=!1,Pa=Ta,Aa=null,Ea=null,Na=Object(m["a"])($a,xa,ka,La,Pa,Aa,Ea),Oa=Na.exports,Sa={name:"sidebar-link",inheritAttrs:!1,inject:{autoClose:{default:!0},addLink:{default:function(){}},removeLink:{default:function(){}}},props:{name:String,icon:String,tag:{type:String,default:"router-link"}},methods:{hideSidebar:function(){this.autoClose&&this.$sidebar.displaySidebar(!1)},isActive:function(){return this.$el.classList.contains("active")}},mounted:function(){this.addLink&&this.addLink(this)},beforeDestroy:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.removeLink&&this.removeLink(this)}},Da=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(t.tag,t._b({tag:"component",staticClass:"nav-item",attrs:{tag:"li"},nativeOn:{click:function(e){return t.hideSidebar(e)}}},"component",t.$attrs,!1),[a("a",{staticClass:"nav-link"},[t._t("default",[t.icon?a("i",{class:t.icon}):t._e(),a("p",[t._v(t._s(t.name))])])],2)])},Ua=[];function qa(t){a("SenD")}var ja=!1,Ia=qa,Ba=null,Fa=null,Ma=Object(m["a"])(Sa,Da,Ua,ja,Ia,Ba,Fa),Va=Ma.exports,za={props:{title:{type:String,default:""},backgroundColor:{type:String,default:"black",validator:function(t){var e=["white","black","darkblue"];return-1!==e.indexOf(t)}},activeColor:{type:String,default:"success",validator:function(t){var e=["primary","info","success","warning","danger"];return-1!==e.indexOf(t)}},sidebarLinks:{type:Array,default:function(){return[]}},autoClose:{type:Boolean,default:!0}},provide:function(){return{autoClose:this.autoClose,addLink:this.addLink,removeLink:this.removeLink}},components:{MovingArrow:Oa,SidebarLink:Va},computed:{arrowMovePx:function(){return this.linkHeight*this.activeLinkIndex}},data:function(){return{linkHeight:65,activeLinkIndex:0,windowWidth:0,isWindows:!1,hasAutoHeight:!1,links:[]}},methods:{findActiveLink:function(){var t=this;this.links.forEach(function(e,a){e.isActive()&&(t.activeLinkIndex=a)})},addLink:function(t){var e=this.$slots.links.indexOf(t.$vnode);this.links.splice(e,0,t)},removeLink:function(t){var e=this.links.indexOf(t);e>-1&&this.links.splice(e,1)},onLogout:function(){var t=this;r.a.auth().signOut().then(function(){t.$router.replace("/login")})}},mounted:function(){this.$watch("$route",this.findActiveLink,{immediate:!0})}},Ra=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar",attrs:{"data-background-color":t.backgroundColor,"data-active-color":t.activeColor}},[a("div",{staticClass:"sidebar-wrapper",attrs:{id:"style-3"}},[a("div",{staticClass:"logo"},[a("div",{staticClass:"simple-text"},[a("div",{staticClass:"d-inline-block",staticStyle:{cursor:"pointer"},attrs:{onClick:"window.location = 'http://www.stresscan.com/'"}},[t._m(0),a("span",[t._v(t._s(t.title))])]),a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onLogout(e)}}},[t._v("sair")])])]),t._t("default"),a("ul",{staticClass:"nav"},[t._t("links",t._l(t.sidebarLinks,function(t,e){return a("sidebar-link",{key:e,attrs:{to:t.path,name:t.name,icon:t.icon}})}))],2),a("moving-arrow",{attrs:{"move-y":t.arrowMovePx}})],2)])},Ga=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"logo-img"},[i("img",{attrs:{src:a("dLd/"),alt:""}})])}];function Ha(t){a("drn2")}var Wa=!1,Xa=Ha,Ya=null,Za=null,Ja=Object(m["a"])(za,Ra,Ga,Wa,Xa,Ya,Za),Ka=Ja.exports,Qa={showSidebar:!1,sidebarLinks:[],displaySidebar:function(t){this.showSidebar=t}},ti={install:function(t){var e=new t({data:{sidebarStore:Qa}});t.prototype.$sidebar=e.sidebarStore,t.component("side-bar",Ka),t.component("sidebar-link",Va)}},ei=ti,ai={props:{title:String,lat:String,lng:String,draggable:Boolean,zoom:Number},mounted:function(){var t=this;setTimeout(function(){var e=new window.google.maps.LatLng(t.lat,t.lng),a={zoom:t.zoom,center:e,scrollwheel:!0,styles:[{featureType:"water",stylers:[{saturation:43},{lightness:-11},{hue:"#0088ff"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{hue:"#ff0000"},{saturation:-100},{lightness:99}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#808080"},{lightness:54}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{color:"#ece2d9"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#ccdca1"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#767676"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#b8cb93"}]},{featureType:"poi.park",stylers:[{visibility:"on"}]},{featureType:"poi.sports_complex",stylers:[{visibility:"on"}]},{featureType:"poi.medical",stylers:[{visibility:"on"}]},{featureType:"poi.business",stylers:[{visibility:"simplified"}]}]},i=new window.google.maps.Map(document.getElementById("map"),a),n=new window.google.maps.Marker({draggable:t.draggable,position:e,title:t.title});n.setMap(i),t.draggable&&window.google.maps.event.addListener(n,"dragend",function(e){t.$emit("dragend",{lat:e.latLng.lat(),lng:e.latLng.lng()}),i.setCenter(n.position)})},500)}},ii=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("card",{staticClass:"card-map"},[a("div",{staticClass:"map"},[a("div",{attrs:{id:"map"}})])])},ni=[];function oi(t){a("Vdai")}var si=!1,ri=oi,li=null,ci=null,di=Object(m["a"])(ai,ii,ni,si,ri,li,ci),ui=di.exports,pi=a("715g"),mi=a.n(pi),fi={getPlacesListByOwner:function(t,e){var a=r.a.firestore().collection("places"),i=a;return i=t?i.where("owner","==",t):i,e||(i=i.where("disabled","==",!1)),new Promise(function(t){i.get().then(function(e){var a=[];e.forEach(function(t){a.push(Object.assign(t.data(),{id:t.id}))}),t(a)})})},getPlaceTowersQnt:function(t,e){var a=r.a.firestore().collection("places").doc(t).collection("towers"),i=a;return e||(i=i.where("disabled","==",!1)),new Promise(function(t){i.get().then(function(e){t(e.size)})})},getClientsList:function(){return new Promise(function(t){r.a.firestore().collection("users_profile").where("isAdmin","==",!1).get().then(function(e){var a=[];e.forEach(function(t){a.push(Object.assign(t.data(),{id:t.id}))}),t(a)})})},getTowerData:function(t,e){var a=r.a.firestore().collection("places").doc(t).collection("towers").doc(e);return new Promise(function(t){a.get().then(function(e){t(Object.assign(e.data(),{id:e.id}))})})}},hi={created:function(){this.scrollTop("#wrapper")},methods:{scrollTop:function(){this.$scrollTo("#wrapper")},scrollTopFast:function(){this.$scrollTo("#wrapper",{duration:25})}}},vi={mixins:[hi]},gi={mixins:[vi],components:{StatsCard:ya,ChartCard:pa},data:function(){return{loadingClientList:!0,loadingPlacesList:!0,noPlacesFound:!1,clientSelect:"",clientsList:[],placesList:[]}},computed:o()({},Object(c["c"])({uid:function(t){return t.users.user.uid},isAdmin:function(t){return t.users.user.isAdmin}})),created:function(){this.getClients(),this.clientSelect=this.$route.query.clientId?this.$route.query.clientId:"",this.getPlacesListByOwner(this.isAdmin?this.clientSelect:this.uid)},methods:{getClients:function(){var t=this;this.loadingClientList=!0,fi.getClientsList().then(function(e){e.map(function(e){t.clientsList.push(e)}),t.loadingClientList=!1,t.$route.query.clientId&&(t.clientSelect=t.$route.query.clientId)})},getPlacesListByOwner:function(t){var e=this;this.placesList=[],this.loadingPlacesList=!0,this.noPlacesFound=!1,t||this.isAdmin?fi.getPlacesListByOwner(t,this.isAdmin).then(function(t){0==t.length?(e.loadingPlacesList=!1,e.noPlacesFound=!0):function(){for(var a=t.length,i=function(i){fi.getPlaceTowersQnt(t[i].id,e.isAdmin).then(function(n){e.placesList.push(Object.assign(t[i],{qntTowers:n})),i==a-1&&(e.loadingPlacesList=!1)})},n=0;n<a;n++)i(n)}()}):this.loadingPlacesList=!1},onChangeClient:function(){this.getPlacesListByOwner(this.clientSelect)},onPlaceClick:function(t){this.$router.replace("".concat(t.id,"/towers/list"))},onNewPlace:function(){this.isAdmin&&this.$router.replace("create?clientId=".concat(this.clientSelect))}}},bi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isAdmin?a("div",{staticClass:"mg-bt-md"},[a("h3",[t._v("Filtrar por Cliente")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.clientSelect,expression:"clientSelect"}],staticClass:"form-control",attrs:{id:"client"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.clientSelect=e.target.multiple?a:a[0]},t.onChangeClient]}},[t.loadingClientList?a("option",{attrs:{disabled:"",value:""}},[t._v("Aguarde...")]):t._e(),a("option",{attrs:{value:""}},[t._v("Todos")]),t._l(t.clientsList,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v("\n        "+t._s(e.name)+"\n      ")])})],2)]):t._e(),t.isAdmin&&!t.loadingPlacesList?a("p-button",{staticClass:"mg-bt-md",attrs:{type:"success",round:""},nativeOn:{click:function(e){return e.preventDefault(),t.onNewPlace(e)}}},[a("i",{staticClass:"ti-plus"}),t._v(" Adicionar Local\n  ")]):t._e(),a("div",{staticClass:"row"},[t.loadingPlacesList?a("div",{staticClass:"ss-inline-spinner el-center mg-tp-md mg-bt-md"}):[t.noPlacesFound?a("div",{staticClass:"mg-lf-sm text-info"},[a("i",{staticClass:"fa fa-close"}),a("b",[t._v("Nenhum local cadastrado para essa conta ainda")])]):t._l(t.placesList,function(e,i){return a("div",{key:i,staticClass:"col-sm-6 col-md-4 col-xl-4",staticStyle:{cursor:"pointer"},on:{click:function(a){t.onPlaceClick(e)}}},[a("stats-card",{attrs:{disabled:e.disabled}},[a("div",{staticClass:"card-icon icon-xbig text-center icon-success",attrs:{slot:"header"},slot:"header"},[a("div",[a("i",{staticClass:"ti-location-pin"})])]),a("div",{staticClass:"numbers",attrs:{slot:"content"},slot:"content"},[a("p",[e.disabled?a("span",{staticClass:"status offline"},[t._v("offline")]):a("span",{staticClass:"status online"},[t._v("online")]),t._v("\n              "+t._s(e.name)+"\n            ")]),a("p",{staticClass:"small-info"},[t._v(t._s(e.location.city)+"/"+t._s(e.location.estate))]),a("span",{staticClass:"big-info"},[t._v("\n              "+t._s(e.qntTowers)+"\n              "),a("i",{staticClass:"ti-signal card-icon-tower"})])])])],1)})]],2)],1)},Ci=[];function wi(t){a("azWw")}var _i=!1,yi=wi,$i=null,xi=null,ki=Object(m["a"])(gi,bi,Ci,_i,yi,$i,xi),Ti=ki.exports,Li=(a("ZDXm"),a("+cKO")),Pi=a("ESwS"),Ai=a.n(Pi),Ei=a("mtWM"),Ni=a.n(Ei),Oi=a("hlPV"),Si=function(t,e){var a=(e-t)/1e3;return a/60},Di={methods:{getLastUpload:function(t){if(!t)return{icon:"ti-time",text:"Aguardando sincronização"};var e=Si(new Date(t).getTime(),Date.now());return e<=1?{icon:"ti-reload",text:"Atualizado agora"}:e<45?{icon:"ti-reload",text:"Atualizado há ".concat(Math.round(e)," minutos")}:e<60?{icon:"ti-time",text:"Atualizado há menos de 1 hora"}:e>=60&&e/60<=24?{icon:"ti-timer",text:"Atualizado há algumas horas"}:e/60>24&&e/60<=120?{icon:"ti-calendar",text:"Atualizado há mais de 1 dia"}:{icon:"ti-calendar",text:"Atualizado há mais de 5 dia"}}}},Ui=new WeakMap,qi={directives:{mask:Oi["mask"]},mixins:[Pi["validationMixin"],vi,Di],components:{Card:aa,StatsCard:ya},data:function(){return{loading:!0,noTowersFound:!1,towersList:[],loadingPlaceData:!0,loadingOwnerData:!0,place:{name:"",location:{postalCode:"",city:"",estate:"",address:"",number:"",district:""},disabled:!1,owner:{id:"",name:""}},qntTowers:0,togglingPlaceDisabled:!1,editPlace:!1,editingButtonText:"Editar local",editingPlace:!1,searchingPostalCode:!1,placeEditingDataBkp:{},placeEditingLocationBkp:{},togglingTowerDisabled:!1}},validations:{place:{name:{required:Li["required"],minLength:Object(Li["minLength"])(3)},location:{postalCode:{required:Li["required"],isValid:function(t){var e=this;return""===t||new Promise(function(t,a){e.place.location.city="",e.place.location.estate="",e.place.location.address="",e.place.location.district="",e.searchingPostalCode=!0,Ni.a.get("https://viacep.com.br/ws/".concat(e.place.location.postalCode,"/json/")).then(function(a){a.data.erro&&(e.searchingPostalCode=!1,t(!1)),e.place.location.city=a.data.localidade,e.place.location.estate=a.data.uf,e.place.location.address=a.data.logradouro,e.place.location.district=a.data.bairro,e.searchingPostalCode=!1,t(!0)},function(a){e.searchingPostalCode=!1,t(!1)})})}},city:{required:Li["required"],minLength:Object(Li["minLength"])(4)},estate:{required:Li["required"],minLength:Object(Li["minLength"])(2),maxLength:Object(Li["maxLength"])(2)},address:{required:Li["required"],minLength:Object(Li["minLength"])(4)},district:{required:Li["required"],minLength:Object(Li["minLength"])(4)},number:{required:Li["required"]}}}},computed:o()({},Object(c["c"])({stateIsAdmin:function(t){return t.users.user.isAdmin}})),created:function(){var t=this,e=function(t){return new Promise(function(e){r.a.firestore().collection("places").doc(t).get().then(function(t){e(t.data())})})},a=function(t,e){return new Promise(function(a){var i=r.a.firestore().collection("places").doc(t).collection("towers"),n=i;e||(n=n.where("disabled","==",!1)),n.get().then(function(t){var e=[];t.forEach(function(t){var a=Object.assign(t.data(),{id:t.id});e.push(a)}),a(e)})})},i=function(t,e){return new Promise(function(a){r.a.firestore().collection("places").doc(t).collection("towers").doc(e).collection("stats").orderBy("datetime","desc").limit(1).get().then(function(t){var e;t.forEach(function(t){e=t.data()}),a(e||{})})})};e(this.$route.params.placeId).then(function(e){t.place=e,t.place.owner={id:e.owner},t.loadingPlaceData=!1,t.stateIsAdmin&&r.a.firestore().collection("users_profile").doc(e.owner.id).get().then(function(e){t.place.owner.name=e.data().name,t.loadingOwnerData=!1})}),a(this.$route.params.placeId,this.stateIsAdmin).then(function(e){t.loading=!1,t.qntTowers=e.length,0==t.qntTowers?t.noTowersFound=!0:e.map(function(e){i(t.$route.params.placeId,e.id).then(function(a){t.towersList.push(Object.assign(e,{last_stats:a||{},last_upload:t.getLastUpload(a.datetime||0),showSuspendedMenu:!1}))})})})},methods:{onOutsideClick:function(){this.closeAllSuspendedMenu()},closeAllSuspendedMenu:function(){this.towersList.map(function(t){t.showSuspendedMenu=!1})},onGoBack:function(){this.$router.push("/dashboard/index/places?clientId=".concat(this.place.owner.id))},onEditPlace:function(){this.$v.$reset(),this.editPlace=!0;var t=this.place,e=this.place.location;this.placeEditingDataBkp=o()({},t),this.placeEditingLocationBkp=o()({},e),this.scrollTop()},onCancelEditPlace:function(){this.$v.$reset(),this.editPlace=!1,this.place=this.placeEditingDataBkp,this.place.location=this.placeEditingLocationBkp,this.scrollTop()},delayTouch:function(t){t.$reset(),Ui.has(t)&&clearTimeout(Ui.get(t)),Ui.set(t,setTimeout(t.$touch,1e3))},onEditFormSubmit:function(){var t=this;this.stateIsAdmin&&(this.editingPlace=!0,this.editingButtonText="Editando...",this.$v.$touch(),r.a.firestore().collection("places").doc(this.$route.params.placeId).update({name:this.place.name,location:{postalCode:this.place.location.postalCode,city:this.place.location.city,estate:this.place.location.estate.toUpperCase(),address:this.place.location.address,number:this.place.location.number,district:this.place.location.district}}).then(function(e){t.editPlace=!1,t.editingPlace=!1,t.editingButtonText="Editar local"}))},onPlaceToggleDisabled:function(){var t=this;this.stateIsAdmin&&(this.togglingPlaceDisabled=!0,r.a.firestore().collection("places").doc(this.$route.params.placeId).update({disabled:!this.place.disabled}).then(function(e){t.place.disabled=!t.place.disabled,t.togglingPlaceDisabled=!1}))},onNewTower:function(){this.stateIsAdmin&&this.$router.push("create")},onTowerToggleSuspendedMenu:function(t){this.closeAllSuspendedMenu(),this.towersList.map(function(e){e.id===t.id&&(e.showSuspendedMenu=!t.showSuspendedMenu)})},onTowerToggleDisabled:function(t){var e=this;this.stateIsAdmin&&(this.togglingTowerDisabled=!0,r.a.firestore().collection("places").doc(this.$route.params.placeId).collection("towers").doc(t.id).update({disabled:!t.disabled}).then(function(a){t.disabled=!t.disabled,e.togglingTowerDisabled=!1}))},onTowerEdit:function(t){this.$router.replace("../tower/".concat(t.id,"/edit"))},onTowerAlerts:function(t){this.$router.replace("../tower/".concat(t.id,"/alerts"))},onTowerClick:function(t){this.$router.replace("../tower/".concat(t.id,"/details"))}}},ji=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{on:{click:function(e){return e.stopPropagation(),t.onOutsideClick(e)}}},[a("a",{staticClass:"back-link",attrs:{href:"#"},on:{click:t.onGoBack}},[a("i",{staticClass:"ti-arrow-left"}),t._v(" Voltar\n  ")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("card",[a("div",{staticClass:"pd-all-md",attrs:{slot:"raw-content"},slot:"raw-content"},[t.stateIsAdmin&&!t.editPlace?a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onEditPlace(e)}}},[a("i",{staticClass:"ti-pencil "}),t._v(" Editar\n          ")]):t._e(),t.loadingPlaceData?a("div",{staticClass:"ss-inline-spinner el-center mg-tp-md "}):[a("form",{on:{submit:function(e){return e.preventDefault(),t.onEditFormSubmit(e)}}},[t.editPlace?a("ss-fg-input",{class:{"has-error":t.$v.place.name.$error},attrs:{type:"text ",label:"Nome ",placeholder:"Nome "},on:{input:function(e){t.delayTouch(t.$v.place.name)}},model:{value:t.place.name,callback:function(e){t.$set(t.place,"name","string"===typeof e?e.trim():e)},expression:"place.name "}}):a("h3",[t.place.disabled?a("span",{staticClass:"status offline"},[t._v("offline")]):a("span",{staticClass:"status online"},[t._v("online")]),t._v(t._s(t.place.name)+"\n              ")]),t.$v.place.name.$error?a("ul",{staticClass:"field-error-message "},[t.$v.place.name.required?t._e():a("li",[t._v("\n                  Campo requerido\n                ")]),t.$v.place.name.minLength?t._e():a("li",[t._v("\n                  Nome precisa ter no mínimo "+t._s(t.$v.place.name.$params.minLength.min)+" caracteres\n                ")])]):t._e(),t.editPlace?[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("ss-fg-input",{directives:[{name:"mask",rawName:"v-mask",value:"#####-###",expression:"'#####-###'"}],class:{"has-error":t.$v.place.location.postalCode.$error},attrs:{spinner:t.searchingPostalCode,type:"text",maxlength:"9",label:"CEP",placeholder:"CEP"},on:{input:function(e){t.delayTouch(t.$v.place.location.postalCode)}},model:{value:t.place.location.postalCode,callback:function(e){t.$set(t.place.location,"postalCode","string"===typeof e?e.trim():e)},expression:"place.location.postalCode"}}),t.$v.place.location.postalCode.$error?a("ul",{staticClass:"field-error-message "},[t.$v.place.location.postalCode.required?t._e():a("li",[t._v("\n                        Campo requerido\n                      ")]),t.$v.place.location.postalCode.isValid?t._e():a("li",[t._v("\n                        Esse CEP não é válido\n                      ")])]):t._e()],1),a("div",{staticClass:"col-md-8"},[a("ss-fg-input",{class:{"has-error":t.$v.place.location.district.$error},attrs:{type:"text",label:"Bairro",placeholder:"Bairro"},on:{input:function(e){t.delayTouch(t.$v.place.location.district)}},model:{value:t.place.location.district,callback:function(e){t.$set(t.place.location,"district","string"===typeof e?e.trim():e)},expression:"place.location.district"}}),t.$v.place.location.district.$error?a("ul",{staticClass:"field-error-message "},[t.$v.place.location.district.required?t._e():a("li",[t._v("\n                        Campo requerido\n                      ")]),t.$v.place.location.district.minLength?t._e():a("li",[t._v("\n                        Bairro precisa ter no mínimo "+t._s(t.$v.place.location.district.$params.minLength.min)+" caracteres\n                      ")])]):t._e()],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-10 "},[a("ss-fg-input",{class:{"has-error":t.$v.place.location.city.$error},attrs:{type:"text ",label:"Cidade ",placeholder:"Cidade ",maxlength:"50 "},on:{input:function(e){t.delayTouch(t.$v.place.location.city)}},model:{value:t.place.location.city,callback:function(e){t.$set(t.place.location,"city","string"===typeof e?e.trim():e)},expression:"place.location.city "}}),a("span",{staticClass:"d-none d-sm-block city-estate-slash "},[t._v("/")]),t.$v.place.location.city.$error?a("ul",{staticClass:"field-error-message "},[t.$v.place.location.city.required?t._e():a("li",[t._v("\n                        Campo requerido\n                      ")]),t.$v.place.location.city.minLength?t._e():a("li",[t._v("\n                        Cidade precisa ter no mínimo "+t._s(t.$v.place.location.city.$params.minLength.min)+" caracteres\n                      ")])]):t._e(),t.$v.place.location.estate.$error?a("ul",{staticClass:"field-error-message d-none d-sm-block"},[t.$v.place.location.estate.required?t._e():a("li",[t._v("\n                        Campo UF é requerido\n                      ")]),t.$v.place.location.estate.minLength&&t.$v.place.location.estate.maxLength?t._e():a("li",[t._v("\n                        UF precisa ter "+t._s(t.$v.place.location.estate.$params.minLength.min)+" caracteres\n                      ")])]):t._e()],1),a("div",{staticClass:"col-sm-2"},[a("ss-fg-input",{class:{"has-error":t.$v.place.location.estate.$error},attrs:{uppercase:!0,type:"text ",label:"UF ",maxlength:"2 ",placeholder:"UF "},on:{input:function(e){t.delayTouch(t.$v.place.location.estate)}},model:{value:t.place.location.estate,callback:function(e){t.$set(t.place.location,"estate","string"===typeof e?e.trim():e)},expression:"place.location.estate "}}),t.$v.place.location.estate.$error?a("ul",{staticClass:"field-error-message d-sm-none"},[t.$v.place.location.estate.required?t._e():a("li",[t._v("\n                        Campo UF é requerido\n                      ")]),t.$v.place.location.estate.minLength&&t.$v.place.location.estate.maxLength?t._e():a("li",[t._v("\n                        UF precisa ter "+t._s(t.$v.place.location.estate.$params.minLength.min)+" caracteres\n                      ")])]):t._e()],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("ss-fg-input",{class:{"has-error":t.$v.place.location.address.$error},attrs:{maxlength:"100",type:"text",label:"Endereço",placeholder:"Endereço"},on:{input:function(e){t.delayTouch(t.$v.place.location.address)}},model:{value:t.place.location.address,callback:function(e){t.$set(t.place.location,"address","string"===typeof e?e.trim():e)},expression:"place.location.address"}}),t.$v.place.location.address.$error?a("ul",{staticClass:"field-error-message "},[t.$v.place.location.address.required?t._e():a("li",[t._v("\n                        Campo requerido\n                      ")]),t.$v.place.location.address.minLength?t._e():a("li",[t._v("\n                        Endereço precisa ter no mínimo "+t._s(t.$v.place.location.address.$params.minLength.min)+" caracteres\n                      ")])]):t._e()],1),a("div",{staticClass:"col-md-4"},[a("ss-fg-input",{class:{"has-error":t.$v.place.location.number.$error},attrs:{type:"text",maxlength:"10",label:"Número",placeholder:"Número"},on:{input:function(e){t.delayTouch(t.$v.place.location.number)}},model:{value:t.place.location.number,callback:function(e){t.$set(t.place.location,"number","string"===typeof e?e.trim():e)},expression:"place.location.number"}}),t.$v.place.location.number.$error?a("ul",{staticClass:"field-error-message "},[t.$v.place.location.number.required?t._e():a("li",[t._v("\n                        Campo requerido\n                      ")])]):t._e()],1)]),a("div",{staticClass:"mg-bt-md"},[a("p-button",{attrs:{type:"info",nativeType:"submit",disabled:t.$v.$invalid||t.editingPlace,round:""}},[t._v("\n                    "+t._s(t.editingButtonText)+"\n                  ")]),a("a",{staticClass:"mg-lf-sm",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onCancelEditPlace(e)}}},[t._v("Cancelar")])],1)]:[a("i",{staticClass:"ti-location-pin "}),t._v(" "+t._s(t.place.location.city)+"/"+t._s(t.place.location.estate)),a("br"),t._v(" "+t._s(t.place.location.address)+", "+t._s(t.place.location.number)),a("br"),t._v(" "+t._s(t.place.location.district)),a("br"),t._v(" "+t._s(t.place.location.postalCode)+"\n              ")]],2),a("br"),a("i",{staticClass:"ti-signal"}),t._v(" "+t._s(t.qntTowers)+" torre(s)\n            "),t.stateIsAdmin?a("div",{staticClass:"mg-tp-md "},[a("span",{class:{"text-danger":t.place.disabled,"text-success":!t.place.disabled}},[a("i",{staticClass:"ti-flag"}),t._v(" "+t._s(t.place.disabled?"Desativado ":"Ativado ")+"\n              ")]),t.togglingPlaceDisabled?a("div",{staticClass:"ss-inline-block-spinner mg-lf-sm "}):a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onPlaceToggleDisabled(e)}}},[t._v(t._s(t.place.disabled?"Ativar ":"Desativar "))])]):t._e()]],2)]),t.stateIsAdmin?a("card",{attrs:{title:"Cliente "}},[a("div",{staticClass:"pd-all-md pd-tp-none",attrs:{slot:"raw-content"},slot:"raw-content"},[a("i",{staticClass:"ti-user"}),t.loadingOwnerData?a("div",{staticClass:"ss-inline-block-spinner mg-lf-sm "}):a("span",[t._v(" "+t._s(t.place.owner.name))])])]):t._e()],1)]),a("div",{staticClass:"row"},[t.loading?a("div",{staticClass:"ss-inline-spinner el-center mg-tp-md"}):[t.stateIsAdmin?a("div",{staticClass:"col-sm-12 mg-bt-md mg-lf-sm "},[a("p-button",{attrs:{type:"success ",round:""},nativeOn:{click:function(e){return e.preventDefault(),t.onNewTower(e)}}},[a("i",{staticClass:"ti-plus "}),t._v(" Adicionar Torre\n        ")])],1):t._e(),t.noTowersFound?a("div",{staticClass:"col-sm-12 mg-lf-sm text-info"},[a("i",{staticClass:"fa fa-close"}),a("b",[t._v("Nenhuma torre cadastrada para este local ainda")])]):t._e(),t._l(t.towersList,function(e,i){return a("div",{key:i,staticClass:"col-sm-6 col-md-4 col-xl-4 tower-card-wrapper",on:{click:function(a){t.onTowerClick(e)}}},[a("stats-card",{attrs:{disabled:e.disabled}},[a("div",{staticClass:"tower-options",attrs:{slot:"header"},slot:"header"},[a("a",{attrs:{href:"#"},on:{click:function(a){a.preventDefault(),a.stopPropagation(),t.onTowerToggleSuspendedMenu(e)}}},[a("i",{staticClass:"fa fa-ellipsis-v"})]),e.showSuspendedMenu?a("ul",{staticClass:"tower-menu-options"},[a("li",[a("div",{staticClass:"seta"})]),t.stateIsAdmin?a("li",[a("i",{staticClass:"ti-pencil"}),a("a",{attrs:{href:"#"},on:{click:function(a){a.preventDefault(),a.stopPropagation(),t.onTowerEdit(e)}}},[t._v("Editar")])]):t._e(),t.stateIsAdmin?a("li",[a("i",{staticClass:"ti-flag",class:{"text-danger":e.disabled,"text-success":!e.disabled}}),t.togglingTowerDisabled?a("div",{staticClass:"ss-spinner ss-inline-block-spinner mg-lf-sm"}):a("a",{attrs:{href:"#"},on:{click:function(a){a.preventDefault(),a.stopPropagation(),t.onTowerToggleDisabled(e)}}},[t._v(t._s(e.disabled?"Ativar":"Desativar"))])]):t._e(),a("li",[a("i",{staticClass:"ti-bell"}),a("a",{attrs:{href:"#"},on:{click:function(a){a.preventDefault(),a.stopPropagation(),t.onTowerAlerts(e)}}},[t._v("Alertas")])])]):t._e()]),a("div",{staticClass:"card-icon icon-xbig text-center icon-success",attrs:{slot:"header"},slot:"header"},[a("div",[a("i",{staticClass:"ti-signal"})])]),a("div",{staticClass:"numbers",attrs:{slot:"content"},slot:"content"},[a("p",[e.disabled?a("span",{staticClass:"status offline"},[t._v("offline")]):a("span",{staticClass:"status online"},[t._v("online")]),t._v(t._s(e.name)+"\n            ")]),a("p",{staticClass:"small-info text-muted tower-code"},[a("span",[t._v(t._s(e.id))])]),a("p",{staticClass:"small-info"},[t._v(t._s(e.culture))]),a("p",{staticClass:"big-info"},[t._v("\n              "+t._s(e.last_stats.environment_temperature)+"°\n            ")])]),a("div",{staticClass:"stats last-upload",attrs:{slot:"footer"},slot:"footer"},[a("i",{class:e.last_upload.icon}),t._v(" "+t._s(e.last_upload.text)+"\n          ")])])],1)})]],2)])},Ii=[];function Bi(t){a("kXU6")}var Fi=!1,Mi=Bi,Vi=null,zi=null,Ri=Object(m["a"])(qi,ji,Ii,Fi,Mi,Vi,zi),Gi=Ri.exports,Hi=(a("gbyG"),a("Gh7F"),a("rzQm")),Wi=a.n(Hi),Xi=(a("iWxt"),function(t){var e=t.filter(function(t){if(t.datetime){var e=Si(new Date(t.datetime).getTime(),Date.now());return e/60<=24}}).map(function(t){var e=new Date(t.datetime);return Object.assign(t,{date:{day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()},time:{hour:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()}})});return e}),Yi=function(t){var e=[],a=[],i=[];if(t.length){var n=t[0].date.day,o=t[0].time.hour;t.forEach(function(t){t.date.day==n&&t.time.hour==o?e.push(t):(a["".concat(n,"_").concat(o)]=e,i.push("".concat(n,"_").concat(o)),e=[],n=t.date.day,o=t.time.hour)})}return{stats:a,index:i}},Zi=function(t,e){return e.map(function(e){return t[e][0].time.hour})},Ji=function(t,e,a){return e.map(function(e){var i=t[e],n=i.map(function(t){return t[a]}).reduce(function(t,e){return t+e},0),o=n/i.length;return o.toFixed(1)})},Ki=function(t,e,a){return e.map(function(e,i){var n=t[e][0];return n?{meta:"".concat(n.date.day,"/").concat(n.date.month," às ").concat(n.time.hour,"h"),value:a[i]}:""})},Qi={getOnlyLast24hStats:Xi,groupStatsByHour:Yi,getAverage:Ji,getLabels:Zi,getSeries:Ki},tn={mixins:[vi,Di],components:{StatsCard:ya,ChartCard:pa,LocationMap:ui},data:function(){return{last24hStatsLength:0,notificationsList:[],gettingPlaceData:!0,place:{name:""},gettingTowerData:!0,gettingTowerStats:!0,tower:{name:"",culture:"",geolocation:{lat:"",lng:""},disabled:!1,stats:{length:0},last_upload:{icon:"",text:""}},showMap:!1,temperatureChart:{},humidityChart:{},areaChart:{serieAOnTop:!1,serieBOnTop:!0}}},created:function(){var t=this,e=function(e,a){r.a.firestore().collection("notifications").where("place","==",e).where("tower","==",a).onSnapshot(function(e){e.docChanges().forEach(function(e){"added"===e.type&&t.notificationsList.unshift(Object.assign(e.doc.data(),{id:e.doc.id,datetime:new Date(e.doc.data().datetime),show:!1})),"removed"===e.type&&(t.notificationsList=t.notificationsList.filter(function(t){return t.id!==e.doc.id}))});for(var a=e.size,i=function(e){setTimeout(function(){t.notificationsList[e-1]&&(t.notificationsList[e-1].show=!0)},100*e)},n=1;n<=a;n++)i(n)})},a=function(t){return new Promise(function(e){r.a.firestore().collection("places").doc(t).get().then(function(t){e(Object.assign(t.data(),{id:t.id}))})})},i=function(e,a){r.a.firestore().collection("places").doc(e).collection("towers").doc(a).onSnapshot(function(e){t.tower=Object.assign(t.tower,e.data()),t.gettingTowerData=!1})},n=function(e,a){r.a.firestore().collection("places").doc(e).collection("towers").doc(a).collection("stats").orderBy("datetime").limit(1e4).onSnapshot(function(e){t.gettingTowerStats=!0;var a=[];e.forEach(function(e){var i=[],n=new Date(e.data().datetime),o="".concat(n.getDate(),"/").concat(n.getMonth()+1,"/").concat(n.getFullYear()," ").concat(n.getHours(),"h").concat(n.getMinutes());i.push({title:"Planta",icon:"thermometer-full",number:e.data().ground_temperature||0,sign:"°",date:o}),i.push({title:"Ambiente",icon:"thermometer-full",number:e.data().environment_temperature||0,sign:"°",date:o}),i.push({title:"Planta",icon:"umbrella",number:e.data().ground_humidity||0,sign:"%",date:o}),i.push({title:"Ambiente",icon:"umbrella",number:e.data().environment_humidity||0,sign:"%",date:o}),t.tower=Object.assign(t.tower,{last_upload:t.getLastUpload(e.data().datetime||Date.now().getTime()),stats_cards:i}),a.push(Object.assign(e.data(),{id:e.id}))}),t.tower.stats.length=a.length,t.gettingTowerStats=!1,o(a)})};a(this.$route.params.placeId).then(function(e){t.gettingPlaceData=!1,t.place=e}),i(this.$route.params.placeId,this.$route.params.towerId),e(this.$route.params.placeId,this.$route.params.towerId),n(this.$route.params.placeId,this.$route.params.towerId);var o=function(e){var a=Qi.getOnlyLast24hStats(e);t.last24hStatsLength=a.length;var i=Qi.groupStatsByHour(a),n=Qi.getLabels(i.stats,i.index);s(n,i.stats,i.index),l(n,i.stats,i.index)},s=function(e,a,i){var n=Qi.getAverage(a,i,"environment_temperature"),o=Qi.getAverage(a,i,"ground_temperature"),s=Qi.getSeries(a,i,n),r=Qi.getSeries(a,i,o);t.temperatureChart={data:{labels:e,series:[Wi()(s),Wi()(r)]},options:{showArea:!0,height:"245px",fullWidth:!0,axisX:{showGrid:!0,labelInterpolationFnc:function(t){return t}},axisY:{high:Math.round(Math.max.apply(Math,Wi()(n).concat(Wi()(o))))+1,low:Math.min.apply(Math,Wi()(n).concat(Wi()(o)))-1,labelInterpolationFnc:function(t){return t+"°"}},showPoint:!0,plugins:[mi.a.plugins.tooltip({anchorToPoint:!1,class:"chart-tooltip",transformTooltipTextFnc:function(t){return": "+t+"°"}})]},responsiveOptions:[["screen and (max-width: 560px)",{axisX:{labelInterpolationFnc:function(t){return""}}}],["screen and (min-width: 780px) and (max-width: 990px)",{axisX:{labelInterpolationFnc:function(t){return t+"h"}}}],["screen and (min-width: 1060px)",{axisX:{labelInterpolationFnc:function(t){return t+"h"}}}]]}},l=function(e,a,i){var n=Qi.getAverage(a,i,"environment_humidity"),o=Qi.getAverage(a,i,"ground_humidity"),s=Qi.getSeries(a,i,n),r=Qi.getSeries(a,i,o);t.humidityChart={data:{labels:e,series:[Wi()(s),Wi()(r)]},options:{height:"245px",fullWidth:!0,axisX:{showGrid:!1,labelInterpolationFnc:function(t){return t}},axisY:{high:Math.round(Math.max.apply(Math,Wi()(n).concat(Wi()(o))))+1,low:Math.min.apply(Math,Wi()(n).concat(Wi()(o)))-1,labelInterpolationFnc:function(t){return t+"%"}},showPoint:!0,plugins:[mi.a.plugins.tooltip({anchorToPoint:!1,class:"chart-tooltip-humidity",transformTooltipTextFnc:function(t){return": "+t+"%"}})]},responsiveOptions:[["screen and (max-width: 560px)",{axisX:{labelInterpolationFnc:function(t){return""}}}],["screen and (min-width: 780px) and (max-width: 990px)",{axisX:{labelInterpolationFnc:function(t){return t+"h"}}}],["screen and (min-width: 1060px)",{axisX:{labelInterpolationFnc:function(t){return t+"h"}}}]]}}},methods:{onGoBack:function(){this.$router.push("../../towers/list")},onCloseNotification:function(t){var e=this;t.show=!1,r.a.firestore().collection("notifications").doc(t.id).delete().then().catch(function(t){logService.logError((new Date).getTime(),"A Notificação não pode ser excluída: ".concat(t.message),"onCloseNotification","tower details",e.stateUid)})},bringToTop:function(t){this.$nextTick(function(){var e=t.parentNode;e.appendChild(t)})},onAddData:function(){var t=new Date;t.setHours(t.getHours()-24);for(var e=0;e<96;e++){var a=t.setMinutes(t.getMinutes()+15),i={datetime:a,environment_humidity:Math.floor(20*Math.random())+60,environment_temperature:Math.floor(10*Math.random())+25,ground_humidity:Math.floor(60*Math.random())+40,ground_temperature:Math.floor(18*Math.random())+30};r.a.firestore().collection("places").doc(this.$route.params.placeId).collection("towers").doc(this.$route.params.towerId).collection("stats").add(i)}},bringSeriesToTop:function(t){var e=this;this.$nextTick(function(){e.bringToTop(document.querySelector(t)),t.includes("a")?(e.areaChart.serieAOnTop=!0,e.areaChart.serieBOnTop=!1):(e.areaChart.serieAOnTop=!1,e.areaChart.serieBOnTop=!0)})}}},en=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a",{staticClass:"back-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onAddData(e)}}},[t._v("\n    Inserir dados aleatórios\n  ")]),t._l(t.notificationsList,function(e,i){return e.show?a("div",{key:i,staticClass:"alert alert-warning alert-dismissible fade show",attrs:{role:"alert"}},[a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(a){a.preventDefault(),t.onCloseNotification(e)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])]),a("small",[t._v(t._s(e.datetime.getDate()+"/"+e.datetime.getMonth()+"1/"+e.datetime.getFullYear()+" "+e.datetime.getHours()+"h"+e.datetime.getMinutes()))]),a("br"),a("strong",[t._v("Atenção!")]),t._v(" "+t._s(e.msg)+".\n  ")]):t._e()}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("card",[a("div",{staticClass:"pd-all-md",attrs:{slot:"raw-content"},slot:"raw-content"},[a("a",{staticClass:"back-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onGoBack(e)}}},[a("i",{staticClass:"ti-arrow-left"}),t._v(" Voltar\n          ")]),a("p"),t.gettingTowerData?a("div",{staticClass:"ss-inline-spinner mg-bt-md"}):a("h5",[t.tower.disabled?a("span",{staticClass:"status offline"},[t._v("offline")]):a("span",{staticClass:"status online"},[t._v("online")]),t._v("\n              "+t._s(t.tower.name)+"\n              "),a("small",{staticClass:"d-block text-muted"},[t._v(t._s(t.tower.id))])]),t._v("\n            Local:\n            "),t.gettingPlaceData?a("div",{staticClass:"ss-inline-block-spinner mg-lf-sm "}):a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onGoBack(e)}}},[t._v(t._s(t.place.name))]),a("br"),t._v("Cultura: "+t._s(t.tower.culture)+"\n            "),a("div",{staticClass:"stats mg-tp-sm d-block"},[a("i",{class:t.tower.last_upload.icon}),t._v(" "+t._s(t.tower.last_upload.text)+"\n            ")]),t.showMap?t._e():a("span",{staticClass:"stats mg-tp-md d-block"},[a("i",{staticClass:"ti-map-alt"}),a("a",{attrs:{href:"#"},on:{click:function(e){t.showMap=!t.showMap}}},[t._v("Mostrar no mapa")])]),a("transition",{attrs:{name:"fade"}},[t.showMap?a("LocationMap",{attrs:{zoom:16,title:t.tower.name,draggable:!1,lat:t.tower.geolocation.lat,lng:t.tower.geolocation.lng}}):t._e()],1),a("transition",{attrs:{name:"fade"}},[t.showMap?a("a",{staticClass:"btn btn-round btn-danger",staticStyle:{"margin-top":"20px"},attrs:{href:"#"},on:{click:function(e){t.showMap=!t.showMap}}},[a("i",{staticClass:"ti ti-close"}),t._v(" Fechar Mapa\n              ")]):t._e()])],1)])],1)]),t.gettingTowerStats?a("div",{staticClass:"ss-inline-spinner mg-tp-md mg-lf-md"}):[0===t.tower.stats.length?[t._m(0)]:[a("div",{staticClass:"row"},t._l(t.tower.stats_cards,function(e,i){return a("div",{key:i,staticClass:"col-sm-6 col-md-3"},[a("stats-card",{attrs:{title:e.title,subtitle:"última medição recebida"}},[a("div",{staticClass:"tower-data-card-content-wrapper",attrs:{slot:"raw-content"},slot:"raw-content"},[a("div",{staticClass:"tower-data-card-content-icon text-center",class:{"icon-warning":"Planta"===e.title,"icon-info":"Ambiente"===e.title}},[a("i",{class:"fa fa-"+e.icon})]),t.gettingTowerData?a("div",{staticClass:"ss-inline-spinner mg-tp-md mg-lf-md"}):a("div",{staticClass:"tower-data-card-numbers"},[t._v("\n                "+t._s(e.number)+t._s(e.sign)+"\n              ")])]),a("div",{staticClass:"stats",attrs:{slot:"footer"},slot:"footer"},[a("i",{class:t.tower.last_upload.icon}),t._v(" "+t._s(e.date)+"\n            ")])])],1)})),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("chart-card",{staticClass:"chart-temperature",attrs:{cardBodyNegativeTop:!0,title:"Média de Temperatura por Hora","sub-title":t.last24hStatsLength+" medições recebidas nas últimas 24 Horas","chart-data":t.temperatureChart.data,"chart-options":t.temperatureChart.options,"chart-responsive-options":t.temperatureChart.responsiveOptions}},[a("span",{attrs:{slot:"footer"},slot:"footer"},[a("i",{class:t.tower.last_upload.icon}),t._v(" "+t._s(t.tower.last_upload.text)+"\n            ")]),a("div",{attrs:{slot:"legend"},slot:"legend"},[a("div",{staticClass:"mg-bt-sm"},[a("i",{staticClass:"fa fa-circle text-info"}),t._v(" Ambiente\n                "),a("i",{staticClass:"fa fa-circle text-warning"}),t._v(" Planta\n                "),t.areaChart.serieBOnTop?a("button",{staticClass:"btn btn-sm mg-lf-xs",on:{click:function(e){t.bringSeriesToTop(".ct-series-a")}}},[a("i",{staticClass:"fa fa-exchange"})]):t._e(),t.areaChart.serieAOnTop?a("button",{staticClass:"btn btn-sm mg-lf-xs",on:{click:function(e){t.bringSeriesToTop(".ct-series-b")}}},[a("i",{staticClass:"fa fa-exchange"})]):t._e()])])])],1),a("div",{staticClass:"col-12"},[a("chart-card",{staticClass:"chart-humidity",attrs:{cardBodyNegativeTop:!0,title:"Média de Umidade por Hora","sub-title":t.last24hStatsLength+" medições recebidas nas últimas 24 Horas","chart-data":t.humidityChart.data,"chart-options":t.humidityChart.options,"chart-responsive-options":t.humidityChart.responsiveOptions}},[a("span",{attrs:{slot:"footer"},slot:"footer"},[a("i",{class:t.tower.last_upload.icon}),t._v(" "+t._s(t.tower.last_upload.text)+"\n            ")]),a("div",{attrs:{slot:"legend"},slot:"legend"},[a("i",{staticClass:"fa fa-circle text-info"}),t._v(" Ambiente\n              "),a("i",{staticClass:"fa fa-circle text-warning"}),t._v(" Planta\n            ")])])],1)])]]],2)},an=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 mg-lf-sm text-info"},[a("i",{staticClass:"fa fa-close"}),a("b",[t._v("Essa torre ainda não possui dados a serem exibido")])])])}];function nn(t){a("OqpP")}var on=!1,sn=nn,rn=null,ln=null,cn=Object(m["a"])(tn,en,an,on,sn,rn,ln),dn=cn.exports,un={logError:function(t,e,a,i,n){return new Promise(function(o){r.a.firestore().collection("error_logs").add({datetime:t,error_message:e,page:a,func:i,logged_user:n}).then(function(t){return o(t)})})}},pn={getAlertData:function(t,e,a){var i=r.a.firestore().collection("places").doc(t).collection("towers").doc(e).collection("alerts").doc(a);return new Promise(function(t){i.get().then(function(e){t(Object.assign(e.data(),{id:e.id}))})})}},mn={mixins:[vi],components:{PaperTable:qe},data:function(){return{tower:{id:"",name:"",totalOfAlerts:""},alertsTable:{title:"",columns:["alert"],data:[]},alertForm:{metric:"",for:"",when:"",value:""},gettingTowerData:!0,gettingAlertData:!0,gettingAlerts:!0,showAlertForm:!1}},computed:o()({},Object(c["c"])({stateUid:function(t){return t.users.user.uid}})),created:function(){var t=this,e=function(t,e){var a=r.a.firestore().collection("places").doc(t).collection("towers").doc(e).collection("alerts");return new Promise(function(t){a.get().then(function(e){t(e.size)})})},a=function(e,a){r.a.firestore().collection("places").doc(e).collection("towers").doc(a).collection("alerts").orderBy("datetime","desc").onSnapshot(function(e){t.gettingAlerts=!1,e.docChanges().forEach(function(e){var a=e.doc.data(),i={id:e.doc.id,enabled:a.enabled,alert:"".concat("temperature"===a.metric?"Temperatura":"Umidade"," ").concat("ground"===a.for?"da planta":"do ambiente"," ").concat("high"===a.when?"maior":"menor"," que ").concat(a.value)};"added"===e.type&&(t.alertsTable.data.unshift(i),t.tower.totalOfAlerts++),"modified"===e.type&&(t.alertsTable.data=t.alertsTable.data.map(function(t){return t.id===e.doc.id?i:t})),"removed"===e.type&&(t.alertsTable.data=t.alertsTable.data.filter(function(t){return t.id!==e.doc.id}),t.tower.totalOfAlerts--)})})};fi.getTowerData(this.$route.params.placeId,this.$route.params.towerId).then(function(e){t.gettingTowerData=!1,t.tower=Object.assign(t.tower,e)}),a(this.$route.params.placeId,this.$route.params.towerId),e(this.$route.params.placeId,this.$route.params.towerId).then(function(e){Object.assign(t.tower,{totalOfAlerts:e})}),this.$nextTick(function(){document.querySelector(".main-panel").classList.remove("overflow-hidden")})},methods:{onGoBack:function(){this.$router.push("../../towers/list")},onAddNewAlert:function(){this.onShowAlertForm(!0),this.gettingAlertData=!1},onShowAlertForm:function(t){this.showAlertForm=!0,t&&this.resetForm(),this.scrollTopFast(),this.$nextTick(function(){document.querySelector(".main-panel").classList.add("overflow-hidden")})},onHideAlertForm:function(){this.showAlertForm=!1,this.resetForm(),this.$nextTick(function(){document.querySelector(".main-panel").classList.remove("overflow-hidden")})},resetForm:function(){this.alertForm={metric:"temperature",for:"ground",when:"high",value:0}},onAlertFormSubmit:function(){var t=this,e=r.a.firestore().collection("places").doc(this.$route.params.placeId).collection("towers").doc(this.$route.params.towerId).collection("alerts");this.alertForm.id?e.doc(this.alertForm.id).update({metric:this.alertForm.metric,for:this.alertForm.for,when:this.alertForm.when,value:this.alertForm.value}).catch(function(e){t.notifyVue("bottom","right","danger","O alerta não pode ser editado: erro inesperado","ti-thumb-down"),un.logError((new Date).getTime(),"O alerta não pode ser editado: ".concat(e.message),"createUser","create user account",t.stateUid)}):e.add(Object.assign(this.alertForm,{datetime:Date.now(),enabled:!0})).then(function(e){t.notifyVue("bottom","right","success","Alerta criado com sucesso","ti-thumb-up")}).catch(function(e){t.notifyVue("bottom","right","danger","O alerta não pode ser criado: erro inesperado","ti-thumb-down"),un.logError((new Date).getTime(),"O alerta não pode ser criado: ".concat(e.message),"createAlert","create Alert",t.stateUid)}),this.onHideAlertForm()},onEdit:function(t){var e=this;this.gettingAlertData=!0,pn.getAlertData(this.$route.params.placeId,this.$route.params.towerId,t).then(function(t){e.alertForm=t,e.gettingAlertData=!1}),this.onShowAlertForm(!1)},onRemove:function(t){var e=this;this.$dialog.confirm("Deseja realmente excluir esse alerta?").then(function(a){r.a.firestore().collection("places").doc(e.$route.params.placeId).collection("towers").doc(e.$route.params.towerId).collection("alerts").doc(t).delete().then(function(){e.onHideAlertForm(),e.notifyVue("bottom","right","success","Alerta excluído com sucesso","ti-thumb-up")}).catch(function(t){e.notifyVue("bottom","right","danger","O alerta não pode ser excluído: erro inesperado","ti-thumb-down"),un.logError((new Date).getTime(),"O alerta não pode ser excluído: ".concat(t.message),"createUser","create user account",e.stateUid)})})},onToggleEnable:function(t){var e=this;r.a.firestore().collection("places").doc(this.$route.params.placeId).collection("towers").doc(this.$route.params.towerId).collection("alerts").doc(t.id).update({enabled:t.enabled}).catch(function(a){un.logError((new Date).getTime(),"Erro ao tentar habilitar/desabilitar o alerta ".concat(t.id," da torre ").concat(e.$route.params.towerId," do local ").concat(e.$route.params.placeId,": ").concat(a.message),"Alerts","onToggleEnable",e.stateUid)})},notifyVue:function(t,e,a,i,n){this.$notify({message:i,icon:n,horizontalAlign:e,verticalAlign:t,type:a})}}},fn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a",{staticClass:"back-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onGoBack(e)}}},[a("i",{staticClass:"ti-arrow-left"}),t._v(" Voltar\n  ")]),t.gettingTowerData?a("div",{staticClass:"ss-inline-spinner mg-bt-md"}):a("h5",[t.tower.disabled?a("span",{staticClass:"status offline"},[t._v("offline")]):a("span",{staticClass:"status online"},[t._v("online")]),t._v("\n    "+t._s(t.tower.name)+"\n    "),a("small",{staticClass:"d-block text-muted"},[t._v(t._s(t.tower.id))])]),a("h3",[t._v("Alertas")]),t.gettingAlerts?a("div",{staticClass:"ss-inline-spinner mg-bt-md"}):a("div",[0===t.tower.totalOfAlerts?a("div",{staticClass:"row"},[t._m(0)]):a("div",{staticClass:"row"},[a("paper-table",{attrs:{clickable:!0,showheaders:!1,toggleCheckbox:!0,data:t.alertsTable.data,columns:t.alertsTable.columns,type:"hover"},on:{openData:t.onEdit,click:t.onEdit,toggleCheckbox:t.onToggleEnable}})],1)]),a("p-button",{staticClass:"mg-tp-md",attrs:{type:"success",round:""},nativeOn:{click:function(e){return e.preventDefault(),t.onAddNewAlert(e)}}},[a("i",{staticClass:"ti-plus "}),t._v(" Criar Alerta\n  ")]),t.showAlertForm?a("form",{staticClass:"form-add-Alert pd-all-md",on:{submit:function(e){return e.preventDefault(),t.onAlertFormSubmit(e)}}},[a("a",{staticClass:"close-modal",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onHideAlertForm(e)}}},[a("i",{staticClass:"fa fa-close"})]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-center text-uppercase"},[t.gettingAlertData?a("div",{staticClass:"ss-inline-spinner mg-bt-md el-center"}):a("h5",[t._v(t._s(t.alertForm.id?"Editar":"Criar")+" Alerta")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-8 offset-2"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-sm-6"},[a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.alertForm.metric,expression:"alertForm.metric"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.alertForm,"metric",e.target.multiple?a:a[0])}}},[t.gettingAlertData?a("option",{attrs:{disabled:"",value:""}},[t._v("Aguarde...")]):t._e(),a("option",{attrs:{value:"temperature"}},[t._v("Temperatura")]),a("option",{attrs:{value:"humidity"}},[t._v("Umidade")])])])]),a("div",{staticClass:"col-12 col-sm-6"},[a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.alertForm.for,expression:"alertForm.for"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.alertForm,"for",e.target.multiple?a:a[0])}}},[t.gettingAlertData?a("option",{attrs:{disabled:"",value:""}},[t._v("Aguarde...")]):t._e(),a("option",{attrs:{value:"environment"}},[t._v("Ambiente")]),a("option",{attrs:{value:"ground"}},[t._v("Planta")])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-sm-6"},[a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.alertForm.when,expression:"alertForm.when"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.alertForm,"when",e.target.multiple?a:a[0])}}},[t.gettingAlertData?a("option",{attrs:{disabled:"",value:""}},[t._v("Aguarde...")]):t._e(),a("option",{attrs:{value:"high"}},[t._v("Maior que")]),a("option",{attrs:{value:"low"}},[t._v("Menor que")])])])]),a("div",{staticClass:"col-12 col-sm-6"},[a("div",{staticClass:"form-group"},[a("ss-fg-input",{attrs:{spinner:t.gettingAlertData,type:"number"},model:{value:t.alertForm.value,callback:function(e){t.$set(t.alertForm,"value",e)},expression:"alertForm.value"}})],1)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.alertForm.id,expression:"alertForm.id"}],attrs:{type:"hidden",name:""},domProps:{value:t.alertForm.id},on:{input:function(e){e.target.composing||t.$set(t.alertForm,"id",e.target.value)}}}),a("p-button",{attrs:{disabled:t.gettingAlertData,nativeType:"submit",type:"success",round:""}},[t.gettingAlertData?[a("i",{staticClass:"fa fa-spinner"})]:[t._v("\n                ok\n              ")]],2),t.alertForm.id?a("a",{staticClass:"mg-lf-sm text-danger",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onRemove(t.alertForm.id)}}},[t._v("Excluir")]):t._e()],1)])])])]):t._e()],1)},hn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-12 mg-lf-sm mg-tp-sm text-info"},[a("i",{staticClass:"fa fa-close"}),a("b",[t._v("Nenhum alerta criado para essa torre")])])}];function vn(t){a("0i3M")}var gn=!1,bn=vn,Cn=null,wn=null,_n=Object(m["a"])(mn,fn,hn,gn,bn,Cn,wn),yn=_n.exports,$n=new WeakMap,xn={directives:{mask:Oi["mask"]},mixins:[Pi["validationMixin"],vi],components:{LocationMap:ui},data:function(){return{place:{id:"",name:"",location:{postalCode:"",city:"",estate:"",address:"",number:"",district:""},owner:{id:"",name:"",placesList:[]}},tower:{id:"",name:"",culture:"",geolocation:{lat:"",lng:""}},gettingPlaceData:!0,gettingOwnerData:!0,buttonText:"Cadastrar torre",creatingTower:!1,towerCreated:!1,gettingLatLng:!0}},validations:{tower:{id:{required:Li["required"],minLength:Object(Li["minLength"])(3)},name:{required:Li["required"],minLength:Object(Li["minLength"])(3)},culture:{required:Li["required"],minLength:Object(Li["minLength"])(2)},geolocation:{lat:{required:Li["required"]},lng:{required:Li["required"]}}}},created:function(){var t=this,e=function(t){return new Promise(function(e){r.a.firestore().collection("places").doc(t).get().then(function(t){e(Object.assign(t.data(),{id:t.id}))})})},a=function(t){return new Promise(function(e){r.a.firestore().collection("users_profile").doc(t).get().then(function(t){e(Object.assign(t.data(),{id:t.id}))})})},i=function(t){var e="AIzaSyAamVCoyQ4AuvBpxVRMs9P-HFkfPVQj0Kw",a="".concat(t.postalCode,",").concat(t.address.replace(" ","+"),",+").concat(t.number.replace(" ","+"),",+").concat(t.district.replace(" ","+"),",+").concat(t.city.replace(" ","+"),",+").concat(t.estate.replace(" ","+")),i="https://maps.googleapis.com/maps/api/geocode/json?address=".concat(a,"&key=").concat(e);return new Promise(function(t,e){Ni.a.get(i).then(function(a){"OK"===a.data.status?t(a):e(new Error(a.data.status))})})};e(this.$route.params.placeId).then(function(e){t.gettingPlaceData=!1,t.place=e,a(e.owner).then(function(e){t.gettingOwnerData=!1,t.place.owner=e}),i(e.location).then(function(e){t.tower.geolocation.lat=String(e.data.results[0].geometry.location.lat),t.tower.geolocation.lng=String(e.data.results[0].geometry.location.lng),t.gettingLatLng=!1},function(t){return console.log(t)})})},methods:{onGoBack:function(){this.$router.replace("list")},delayTouch:function(t){t.$reset(),$n.has(t)&&clearTimeout($n.get(t)),$n.set(t,setTimeout(t.$touch,1e3))},onMapDragEnd:function(t){this.tower.geolocation.lat=String(t.lat),this.tower.geolocation.lng=String(t.lng)},onFormSubmit:function(){var t=this;this.buttonText="Cadastrando torre...",this.creatingTower=!0,this.$v.$touch();var e={date:Date.now(),name:this.tower.name,culture:this.tower.culture,geolocation:{lat:this.tower.geolocation.lat,lng:this.tower.geolocation.lng},disabled:!1};r.a.firestore().collection("places").doc(this.place.id).collection("towers").doc(this.tower.id).set(e).then(function(){t.towerCreated=!0,r.a.firestore().collection("places").doc(t.place.id).collection("towers").doc(t.tower.id).collection("stats").add({datetime:0,environment_temperature:0,environment_humidity:0,ground_temperature:0,ground_humidity:0})}).catch(function(e){console.log("tower couldn't be created ".concat(e)),t.buttonText="Cadastrar torre",t.creatingTower=!1,t.notifyVue("bottom","right","danger","A torre não pode ser criada: erro desconhecido","ti-thumb-down")})},resetForm:function(){var t=this;this.tower.id="",this.tower.name="",this.tower.culture="",this.tower.geolocation.lat=0,this.tower.geolocation.lng=0,this.buttonText="Cadastrar local",this.creatingTower=!1,this.towerCreated=!1,this.$nextTick(function(){t.$v.$reset()})},notifyVue:function(t,e,a,i,n){this.$notify({message:i,icon:n,horizontalAlign:e,verticalAlign:t,type:a})}}},kn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.towerCreated?a("div",[t._m(0),a("p-button",{staticClass:"mg-rg-sm",attrs:{type:"info",round:""},nativeOn:{click:function(e){return e.preventDefault(),t.resetForm(e)}}},[t._v("\n      Cadastrar outra\n    ")]),a("a",{staticClass:"back-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onGoBack(e)}}},[t._v("\n      Voltar para a listagem\n    ")])],1):t._e(),t.towerCreated?t._e():a("div",[a("a",{staticClass:"back-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onGoBack(e)}}},[a("i",{staticClass:"ti-arrow-left"}),t._v(" Voltar\n    ")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.onFormSubmit(e)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("h4",[t._v("Cliente")]),t.gettingOwnerData?a("div",{staticClass:"ss-inline-spinner"}):a("h6",[t._v(t._s(t.place.owner.name))]),a("h4",[t._v("Local")]),t.gettingPlaceData?a("div",{staticClass:"ss-inline-spinner"}):a("h6",[t._v(t._s(t.place.name))])])])]),t._m(1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("ss-fg-input",{class:{"has-error":t.$v.tower.id.$error},attrs:{type:"text",label:"Código da Torre",placeholder:"Código da Torre"},on:{input:function(e){t.delayTouch(t.$v.tower.id)}},model:{value:t.tower.id,callback:function(e){t.$set(t.tower,"id","string"===typeof e?e.trim():e)},expression:"tower.id"}}),t.$v.tower.id.$error?a("ul",{staticClass:"field-error-message"},[t.$v.tower.id.required?t._e():a("li",[t._v("\n              Campo requerido\n            ")]),t.$v.tower.id.minLength?t._e():a("li",[t._v("\n              Código da Torre precisa ter no mínimo "+t._s(t.$v.tower.id.$params.minLength.min)+" caracteres\n            ")])]):t._e()],1),a("div",{staticClass:"col-md-6"},[a("ss-fg-input",{class:{"has-error":t.$v.tower.name.$error},attrs:{type:"text",label:"Nome",placeholder:"Nome"},on:{input:function(e){t.delayTouch(t.$v.tower.name)}},model:{value:t.tower.name,callback:function(e){t.$set(t.tower,"name","string"===typeof e?e.trim():e)},expression:"tower.name"}}),t.$v.tower.name.$error?a("ul",{staticClass:"field-error-message"},[t.$v.tower.name.required?t._e():a("li",[t._v("\n              Campo requerido\n            ")]),t.$v.tower.name.minLength?t._e():a("li",[t._v("\n              Nome precisa ter no mínimo "+t._s(t.$v.tower.name.$params.minLength.min)+" caracteres\n            ")])]):t._e()],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("ss-fg-input",{class:{"has-error":t.$v.tower.culture.$error},attrs:{type:"text",label:"Cultura",placeholder:"Cultura"},on:{input:function(e){t.delayTouch(t.$v.tower.culture)}},model:{value:t.tower.culture,callback:function(e){t.$set(t.tower,"culture","string"===typeof e?e.trim():e)},expression:"tower.culture"}}),t.$v.tower.culture.$error?a("ul",{staticClass:"field-error-message"},[t.$v.tower.culture.required?t._e():a("li",[t._v("\n              Campo requerido\n            ")]),t.$v.tower.culture.minLength?t._e():a("li",[t._v("\n              Cultura precisa ter no mínimo "+t._s(t.$v.tower.culture.$params.minLength.min)+" caracteres\n            ")])]):t._e()],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("ss-fg-input",{attrs:{type:"text",readonly:"",label:"CEP",placeholder:"CEP"},model:{value:t.place.location.postalCode,callback:function(e){t.$set(t.place.location,"postalCode","string"===typeof e?e.trim():e)},expression:"place.location.postalCode"}})],1),a("div",{staticClass:"col-md-8"},[a("ss-fg-input",{attrs:{readonly:"",type:"text",label:"Bairro",placeholder:"Bairro"},model:{value:t.place.location.district,callback:function(e){t.$set(t.place.location,"district","string"===typeof e?e.trim():e)},expression:"place.location.district"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-10"},[a("ss-fg-input",{attrs:{readonly:"",type:"text",label:"Cidade",placeholder:"Cidade",maxlength:"50"},model:{value:t.place.location.city,callback:function(e){t.$set(t.place.location,"city","string"===typeof e?e.trim():e)},expression:"place.location.city"}})],1),a("div",{staticClass:"col-md-2"},[a("ss-fg-input",{attrs:{uppercase:!0,readonly:"",type:"text",label:"UF",maxlength:"2",placeholder:"UF"},model:{value:t.place.location.estate,callback:function(e){t.$set(t.place.location,"estate","string"===typeof e?e.trim():e)},expression:"place.location.estate"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("ss-fg-input",{attrs:{readonly:"",maxlength:"100",type:"text",label:"Endereço",placeholder:"Endereço"},model:{value:t.place.location.address,callback:function(e){t.$set(t.place.location,"address","string"===typeof e?e.trim():e)},expression:"place.location.address"}})],1),a("div",{staticClass:"col-md-4"},[a("ss-fg-input",{attrs:{readonly:"",type:"text",maxlength:"10",label:"Número",placeholder:"Número"},model:{value:t.place.location.number,callback:function(e){t.$set(t.place.location,"number","string"===typeof e?e.trim():e)},expression:"place.location.number"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("h4",[t._v("Localização Geográfica")]),t.gettingLatLng?a("div",{staticClass:"ss-inline-spinner"}):[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tower.geolocation.lat,expression:"tower.geolocation.lat"}],staticClass:"d-none",attrs:{type:"text"},domProps:{value:t.tower.geolocation.lat},on:{input:function(e){e.target.composing||t.$set(t.tower.geolocation,"lat",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tower.geolocation.lng,expression:"tower.geolocation.lng"}],staticClass:"d-none",attrs:{type:"text"},domProps:{value:t.tower.geolocation.lng},on:{input:function(e){e.target.composing||t.$set(t.tower.geolocation,"lng",e.target.value)}}}),a("LocationMap",{staticClass:"geolocation-map",attrs:{zoom:16,title:t.tower.name,draggable:!0,lat:t.tower.geolocation.lat,lng:t.tower.geolocation.lng},on:{dragend:t.onMapDragEnd}})]],2)]),a("div",{staticClass:"text-center "},[a("p-button",{attrs:{type:"info",nativeType:"submit",disabled:t.$v.$invalid||t.creatingTower,round:""}},[t._v("\n          "+t._s(t.buttonText)+"\n        ")])],1),a("div",{staticClass:"clearfix"})])])])},Tn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-success"},[a("i",{staticClass:"ti-check mg-rg-xxs"}),a("b",[t._v("Torre cadastrada com sucesso")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h4",[t._v("Informações da Torre")])])])}];function Ln(t){a("1nkg")}var Pn=!1,An=Ln,En=null,Nn=null,On=Object(m["a"])(xn,kn,Tn,Pn,An,En,Nn),Sn=On.exports,Dn=new WeakMap,Un={directives:{mask:Oi["mask"]},mixins:[Pi["validationMixin"],vi],components:{LocationMap:ui},data:function(){return{place:{id:"",name:"",location:{postalCode:"",city:"",estate:"",address:"",number:"",district:""},owner:{id:"",name:"",placesList:[]}},tower:{name:"",culture:"",geolocation:{lat:"",lng:""}},gettingPlaceData:!0,gettingOwnerData:!0,buttonText:"Editar torre",editingTower:!1,towerEdited:!1,gettingLatLng:!0}},validations:{tower:{name:{required:Li["required"],minLength:Object(Li["minLength"])(3)},culture:{required:Li["required"],minLength:Object(Li["minLength"])(2)},geolocation:{lat:{required:Li["required"]},lng:{required:Li["required"]}}}},created:function(){var t=this,e=function(t){return new Promise(function(e){r.a.firestore().collection("places").doc(t).get().then(function(t){e(Object.assign(t.data(),{id:t.id}))})})},a=function(t){return new Promise(function(e){r.a.firestore().collection("users_profile").doc(t).get().then(function(t){e(Object.assign(t.data(),{id:t.id}))})})},i=function(t,e){return new Promise(function(a){r.a.firestore().collection("places").doc(t).collection("towers").doc(e).get().then(function(t){a(Object.assign(t.data(),{id:t.id}))})})};e(this.$route.params.placeId).then(function(e){t.gettingPlaceData=!1,t.place=e,a(e.owner).then(function(e){t.gettingOwnerData=!1,t.owner=e})}),i(this.$route.params.placeId,this.$route.params.towerId).then(function(e){t.tower=e})},methods:{onGoBack:function(){this.$router.push("../../towers/list")},delayTouch:function(t){t.$reset(),Dn.has(t)&&clearTimeout(Dn.get(t)),Dn.set(t,setTimeout(t.$touch,1e3))},onMapDragEnd:function(t){this.tower.geolocation.lat=String(t.lat),this.tower.geolocation.lng=String(t.lng)},onFormSubmit:function(){var t=this;this.buttonText="Editando torre...",this.editingTower=!0,this.$v.$touch();var e={name:this.tower.name,culture:this.tower.culture,geolocation:{lat:this.tower.geolocation.lat,lng:this.tower.geolocation.lng}};r.a.firestore().collection("places").doc(this.place.id).collection("towers").doc(this.$route.params.towerId).update(e).then(function(e){t.towerEdited=!0}).catch(function(e){console.log("tower couldn't be edited ".concat(e)),t.buttonText="Editar torre",t.editingTower=!1,t.notifyVue("bottom","right","danger","A torre não pode ser criada: erro desconhecido","ti-thumb-down")})},notifyVue:function(t,e,a,i,n){this.$notify({message:i,icon:n,horizontalAlign:e,verticalAlign:t,type:a})}}},qn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.towerEdited?a("div",[t._m(0),a("p-button",{staticClass:"mg-rg-sm",attrs:{type:"info",round:""},nativeOn:{click:function(e){return e.preventDefault(),t.resetForm(e)}}},[t._v("\n      Voltar para o formulário\n    ")]),a("a",{staticClass:"back-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onGoBack(e)}}},[t._v("\n      Voltar para a listagem\n    ")])],1):t._e(),t.towerEdited?t._e():a("div",[a("a",{staticClass:"back-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onGoBack(e)}}},[a("i",{staticClass:"ti-arrow-left"}),t._v(" Voltar\n    ")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.onFormSubmit(e)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("h4",[t._v("Cliente")]),t.gettingOwnerData?a("div",{staticClass:"ss-inline-spinner"}):a("h6",[t._v(t._s(t.place.owner.name))]),a("h4",[t._v("Local")]),t.gettingPlaceData?a("div",{staticClass:"ss-inline-spinner"}):a("h6",[t._v(t._s(t.place.name))])])])]),t._m(1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("ss-fg-input",{attrs:{readonly:"",type:"text",label:"Código da Torre",placeholder:"Código da Torre"},model:{value:t.tower.id,callback:function(e){t.$set(t.tower,"id","string"===typeof e?e.trim():e)},expression:"tower.id"}})],1),a("div",{staticClass:"col-md-6"},[a("ss-fg-input",{class:{"has-error":t.$v.tower.name.$error},attrs:{type:"text",label:"Nome",placeholder:"Nome"},on:{input:function(e){t.delayTouch(t.$v.tower.name)}},model:{value:t.tower.name,callback:function(e){t.$set(t.tower,"name","string"===typeof e?e.trim():e)},expression:"tower.name"}}),t.$v.tower.name.$error?a("ul",{staticClass:"field-error-message"},[t.$v.tower.name.required?t._e():a("li",[t._v("\n              Campo requerido\n            ")]),t.$v.tower.name.minLength?t._e():a("li",[t._v("\n              Nome precisa ter no mínimo "+t._s(t.$v.tower.name.$params.minLength.min)+" caracteres\n            ")])]):t._e()],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("ss-fg-input",{class:{"has-error":t.$v.tower.culture.$error},attrs:{type:"text",label:"Cultura",placeholder:"Cultura"},on:{input:function(e){t.delayTouch(t.$v.tower.culture)}},model:{value:t.tower.culture,callback:function(e){t.$set(t.tower,"culture","string"===typeof e?e.trim():e)},expression:"tower.culture"}}),t.$v.tower.culture.$error?a("ul",{staticClass:"field-error-message"},[t.$v.tower.culture.required?t._e():a("li",[t._v("\n              Campo requerido\n            ")]),t.$v.tower.culture.minLength?t._e():a("li",[t._v("\n              Cultura precisa ter no mínimo "+t._s(t.$v.tower.culture.$params.minLength.min)+" caracteres\n            ")])]):t._e()],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("ss-fg-input",{attrs:{type:"text",readonly:"",label:"CEP",placeholder:"CEP"},model:{value:t.place.location.postalCode,callback:function(e){t.$set(t.place.location,"postalCode","string"===typeof e?e.trim():e)},expression:"place.location.postalCode"}})],1),a("div",{staticClass:"col-md-8"},[a("ss-fg-input",{attrs:{readonly:"",type:"text",label:"Bairro",placeholder:"Bairro"},model:{value:t.place.location.district,callback:function(e){t.$set(t.place.location,"district","string"===typeof e?e.trim():e)},expression:"place.location.district"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-10"},[a("ss-fg-input",{attrs:{readonly:"",type:"text",label:"Cidade",placeholder:"Cidade",maxlength:"50"},model:{value:t.place.location.city,callback:function(e){t.$set(t.place.location,"city","string"===typeof e?e.trim():e)},expression:"place.location.city"}})],1),a("div",{staticClass:"col-md-2"},[a("ss-fg-input",{attrs:{uppercase:!0,readonly:"",type:"text",label:"UF",maxlength:"2",placeholder:"UF"},model:{value:t.place.location.estate,callback:function(e){t.$set(t.place.location,"estate","string"===typeof e?e.trim():e)},expression:"place.location.estate"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("ss-fg-input",{attrs:{readonly:"",maxlength:"100",type:"text",label:"Endereço",placeholder:"Endereço"},model:{value:t.place.location.address,callback:function(e){t.$set(t.place.location,"address","string"===typeof e?e.trim():e)},expression:"place.location.address"}})],1),a("div",{staticClass:"col-md-4"},[a("ss-fg-input",{attrs:{readonly:"",type:"text",maxlength:"10",label:"Número",placeholder:"Número"},model:{value:t.place.location.number,callback:function(e){t.$set(t.place.location,"number","string"===typeof e?e.trim():e)},expression:"place.location.number"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("h4",[t._v("Localização Geográfica")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tower.geolocation.lat,expression:"tower.geolocation.lat"}],staticClass:"d-none",attrs:{type:"text"},domProps:{value:t.tower.geolocation.lat},on:{input:function(e){e.target.composing||t.$set(t.tower.geolocation,"lat",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tower.geolocation.lng,expression:"tower.geolocation.lng"}],staticClass:"d-none",attrs:{type:"text"},domProps:{value:t.tower.geolocation.lng},on:{input:function(e){e.target.composing||t.$set(t.tower.geolocation,"lng",e.target.value)}}}),a("LocationMap",{staticClass:"geolocation-map",attrs:{zoom:16,title:t.tower.name,draggable:!0,lat:t.tower.geolocation.lat,lng:t.tower.geolocation.lng},on:{dragend:t.onMapDragEnd}})],1)]),a("div",{staticClass:"text-center "},[a("p-button",{attrs:{type:"info",nativeType:"submit",disabled:t.$v.$invalid||t.editingTower,round:""}},[t._v("\n          "+t._s(t.buttonText)+"\n        ")])],1),a("div",{staticClass:"clearfix"})])])])},jn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-success"},[a("i",{staticClass:"ti-check mg-rg-xxs"}),a("b",[t._v("Torre editada com sucesso")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h4",[t._v("Informações da Torre")])])])}];function In(t){a("FhhI")}var Bn=!1,Fn=In,Mn=null,Vn=null,zn=Object(m["a"])(Un,qn,jn,Bn,Fn,Mn,Vn),Rn=zn.exports,Gn=(a("WpTh"),{data:function(){return{sendingEmail:!1,emailSent:!1}},props:{email:String},methods:{onChangePassword:function(){var t=this;this.sendingEmail=!0,r.a.auth().languageCode="pt-br",r.a.auth().sendPasswordResetEmail(this.email).then(function(){console.log("email sent"),t.emailSent=!0,t.sendingEmail=!1,t.$emit("notifyVue",{verticalAlign:"bottom",horizontalAlign:"right",type:"success",message:"E-mail com instruções foi enviado com sucesso",icon:"ti-thumb-up"})}).catch(function(e){t.sendingEmail=!1,t.$emit("notifyVue",{verticalAlign:"bottom",horizontalAlign:"right",type:"danger",message:"Ocorreu um erro inesperado, por favor tente novamente",icon:"ti-thumb-down"})})},onResendEmail:function(){this.emailSent=!1}}}),Hn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("card",{staticClass:"card",attrs:{centerTitle:!0,title:"Alterar Senha"}},[a("div",{staticClass:"text-center"},[t.sendingEmail?a("div",{staticClass:"ss-inline-spinner el-center mg-bt-md"}):t._e(),t.sendingEmail||t.emailSent?t._e():a("div",[a("p",[t._v("\n        Para alterar sua senha enviaremos um email para\n        "),a("b",[t._v(t._s(t.email))]),t._v(" com intruções\n      ")]),a("p-button",{attrs:{type:"info",round:""},nativeOn:{click:function(e){return e.preventDefault(),t.onChangePassword(e)}}},[t._v("\n        Enviar email com instruções\n      ")])],1),t.emailSent?a("div",[a("p",{staticClass:"text-success"},[a("i",{staticClass:"ti-check mg-rg-xxs"}),a("b",[t._v("E-mail enviado com sucesso")])]),a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onResendEmail(e)}}},[t._v("Reenviar e-mail")])]):t._e()])])},Wn=[],Xn=!1,Yn=null,Zn=null,Jn=null,Kn=Object(m["a"])(Gn,Hn,Wn,Xn,Yn,Zn,Jn),Qn=Kn.exports,to=new WeakMap,eo={name:"EditProfileForm",components:{ChangePassword:Qn},directives:{mask:Oi["mask"]},mixins:[Pi["validationMixin"]],data:function(){return{place:"",username:"",email:"",phoneNumber:"",phoneNumberTwo:"",name:"",surname:"",address:"",city:"",district:"",number:"",estate:"",postalCode:"",postalCodeMock:"",searchingPostalCode:!1,buttonText:"Atualizar dados",updatingUserProfile:!1,profilePictureUrl:"",coverPictureUrl:""}},validations:{name:{required:Li["required"],minLength:Object(Li["minLength"])(4)},surname:{required:Li["required"],minLength:Object(Li["minLength"])(4)},postalCode:{isValid:function(t){var e=this;return""===t||new Promise(function(t,a){e.address="",e.city="",e.estate="",e.district="",e.searchingPostalCode=!0,Ni.a.get("https://viacep.com.br/ws/".concat(e.postalCode,"/json/")).then(function(a){a.data.erro&&(e.searchingPostalCode=!1,t(!1)),e.address=a.data.logradouro,e.city=a.data.localidade,e.estate=a.data.uf,e.district=a.data.bairro,e.searchingPostalCode=!1,t(!0)},function(a){e.searchingPostalCode=!1,t(!1)})})}},city:{minLength:Object(Li["minLength"])(4)},estate:{minLength:Object(Li["minLength"])(2),maxLength:Object(Li["minLength"])(2)},address:{minLength:Object(Li["minLength"])(4)},district:{minLength:Object(Li["minLength"])(4)}},created:function(){var t=jt()(regeneratorRuntime.mark(function t(){var e,a,i,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=r.a.auth().currentUser.uid,a=function(){return new Promise(function(t){r.a.firestore().collection("users_profile").doc(e).get().then(function(e){return t(e.data())}).catch(function(t){console.log("user profile couldn't be find ".concat(t.message)),n.notifyVue("bottom","right","danger","Ocorreu um erro inesperado na tentativa de recuperar os seus dados, por favor tente novamente","ti-thumb-down")})})},t.next=4,a();case 4:return i=t.sent,this.name=i.name,this.surname=i.surname,this.email=r.a.auth().currentUser.email,this.username=r.a.auth().currentUser.displayName,this.postalCodeMock=i.postalCode,this.city=i.city,this.estate=i.estate,this.address=i.address,this.number=i.number,this.district=i.district,this.phoneNumber=i.phoneNumber,this.phoneNumberTwo=i.phoneNumberTwo,this.isAdmin=Number(i.isAdmin),t.next=20,this.getImageUrl(e,"cover.jpg");case 20:return t.t0=t.sent,t.t1=t.t0+"&v=",t.t2=Date.now(),this.coverPictureUrl=t.t1+t.t2,t.next=26,this.getImageUrl(e,"profile.jpg");case 26:t.t3=t.sent,t.t4=t.t3+"&v=",t.t5=Date.now(),this.profilePictureUrl=t.t4+t.t5,this.$emit("userDataIsLoaded",{uid:e,name:this.name,surname:this.surname,username:this.username,phoneNumber:this.phoneNumber,email:this.email,coverPictureUrl:this.coverPictureUrl,profilePictureUrl:this.profilePictureUrl});case 31:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{delayTouch:function(t){t.$reset(),to.has(t)&&clearTimeout(to.get(t)),to.set(t,setTimeout(t.$touch,1e3))},onUpdateProfile:function(){var t=this;this.buttonText="Atualizando dados...",this.updatingUserProfile=!0,this.$v.$touch(),r.a.firestore().collection("users_profile").doc(r.a.auth().currentUser.uid).update({name:this.name,surname:this.surname,address:this.address||"",city:this.city||"",estate:this.estate||"",district:this.district||"",number:this.number||"",phoneNumber:this.phoneNumber||"",phoneNumberTwo:this.phoneNumberTwo||""}).then(function(){t.postalCode&&r.a.firestore().collection("users_profile").doc(r.a.auth().currentUser.uid).update({postalCode:t.postalCode}).then(function(){return console.log("cep atualizado")}),t.buttonText="Atualizar dados",t.updatingUserProfile=!1,t.notifyVue({verticalAlign:"bottom",horizontalAlign:"right",type:"success",message:"Seus dados foram atualizados com sucesso",icon:"ti-thumb-up"})}).catch(function(e){console.log("user profile couldn't be updated by the user ".concat(e)),t.buttonText="Atualizar dados",t.updatingUserProfile=!1,t.notifyVue({verticalAlign:"bottom",horizontalAlign:"right",type:"danger",message:"Ocorreu um erro inesperado na tentativa de atualizar os seus dados, por favor tente novamente",icon:"ti-thumb-down"})})},getImageUrl:function(){var t=jt()(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){r.a.storage().ref("".concat(e,"/").concat(a)).getDownloadURL().then(function(e){return t(e)}).catch(function(i){console.log("get img ".concat(e,"/").concat(a," error ").concat(i.message)),r.a.storage().ref("default/".concat(a)).getDownloadURL().then(function(e){return t(e)}).catch(function(t){return console.log("get img default/".concat(a," error ").concat(t.message))})})}));case 1:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),notifyVue:function(t){this.$emit("notifyVue",{verticalAlign:t.verticalAlign,horizontalAlign:t.horizontalAlign,type:t.type,message:t.message,icon:t.icon})}}},ao=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("card",{staticClass:"card",attrs:{title:"Editar Dados"}},[a("div",[a("form",{on:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("ss-fg-input",{attrs:{readonly:"",type:"email",label:"Email",placeholder:"Email"},model:{value:t.email,callback:function(e){t.email="string"===typeof e?e.trim():e},expression:"email"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("ss-fg-input",{attrs:{readonly:"",type:"text",label:"Usuário",placeholder:"Usuário"},model:{value:t.username,callback:function(e){t.username="string"===typeof e?e.trim():e},expression:"username"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("ss-fg-input",{class:{"has-error":t.$v.name.$error},attrs:{type:"text",label:"Nome",placeholder:"Nome"},on:{input:function(e){t.delayTouch(t.$v.name)}},model:{value:t.name,callback:function(e){t.name="string"===typeof e?e.trim():e},expression:"name"}}),t.$v.name.$error?a("ul",{staticClass:"field-error-message"},[t.$v.name.required?t._e():a("li",[t._v("\n                Campo requerido\n              ")]),t.$v.name.minLength?t._e():a("li",[t._v("\n                Nome precisa ter no mínimo "+t._s(t.$v.name.$params.minLength.min)+" caracteres\n              ")])]):t._e()],1),a("div",{staticClass:"col-sm-6"},[a("ss-fg-input",{class:{"has-error":t.$v.surname.$error},attrs:{type:"text",label:"Sobrenome",placeholder:"Sobrenome"},on:{input:function(e){t.delayTouch(t.$v.surname)}},model:{value:t.surname,callback:function(e){t.surname="string"===typeof e?e.trim():e},expression:"surname"}}),t.$v.surname.$error?a("ul",{staticClass:"field-error-message"},[t.$v.surname.required?t._e():a("li",[t._v("\n                Campo requerido\n              ")]),t.$v.surname.minLength?t._e():a("li",[t._v("\n                Sobrenome precisa ter no mínimo "+t._s(t.$v.surname.$params.minLength.min)+" caracteres\n              ")])]):t._e()],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4 col-md-6"},[t.postalCode?t._e():a("span",{staticClass:"fakePostalCode form-control"},[t._v(t._s(t.postalCodeMock))]),a("ss-fg-input",{directives:[{name:"mask",rawName:"v-mask",value:"#####-###",expression:"'#####-###'"}],class:{"has-error":t.$v.postalCode.$error},attrs:{spinner:t.searchingPostalCode,type:"text",maxlength:"9",label:"CEP"},on:{input:function(e){t.delayTouch(t.$v.postalCode)}},model:{value:t.postalCode,callback:function(e){t.postalCode="string"===typeof e?e.trim():e},expression:"postalCode"}}),t.$v.postalCode.$error?a("ul",{staticClass:"field-error-message "},[t.$v.postalCode.isValid?t._e():a("li",[t._v("\n                Esse CEP não é válido\n              ")])]):t._e()],1),a("div",{staticClass:"col-sm-8 col-md-6"},[a("ss-fg-input",{class:{"has-error":t.$v.address.$error},attrs:{maxlength:"100",type:"text",label:"Endereço",placeholder:"Endereço"},on:{input:function(e){t.delayTouch(t.$v.address)}},model:{value:t.address,callback:function(e){t.address="string"===typeof e?e.trim():e},expression:"address"}}),t.$v.address.$error?a("ul",{staticClass:"field-error-message "},[t.$v.address.minLength?t._e():a("li",[t._v("\n                Endereço precisa ter no mínimo "+t._s(t.$v.address.$params.minLength.min)+" caracteres\n              ")])]):t._e()],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-10 col-md-8"},[a("ss-fg-input",{class:{"has-error":t.$v.city.$error},attrs:{type:"text",label:"Cidade",placeholder:"Cidade",maxlength:"50"},on:{input:function(e){t.delayTouch(t.$v.city)}},model:{value:t.city,callback:function(e){t.city="string"===typeof e?e.trim():e},expression:"city"}}),t.$v.city.$error?a("ul",{staticClass:"field-error-message "},[t.$v.city.minLength?t._e():a("li",[t._v("\n                Cidade precisa ter no mínimo "+t._s(t.$v.city.$params.minLength.min)+" caracteres\n              ")])]):t._e()],1),a("div",{staticClass:"col-sm-2 col-md-4"},[a("ss-fg-input",{class:{"has-error":t.$v.estate.$error},attrs:{uppercase:!0,type:"text",label:"UF",maxlength:"2",placeholder:"UF"},on:{input:function(e){t.delayTouch(t.$v.estate)}},model:{value:t.estate,callback:function(e){t.estate="string"===typeof e?e.trim():e},expression:"estate"}}),t.$v.estate.$error?a("ul",{staticClass:"field-error-message "},[t.$v.estate.minLength&&t.$v.estate.maxLength?t._e():a("li",[t._v("\n                UF precisa ter "+t._s(t.$v.estate.$params.minLength.min)+" caracteres\n              ")])]):t._e()],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-8"},[a("ss-fg-input",{class:{"has-error":t.$v.district.$error},attrs:{type:"text",label:"Bairro",placeholder:"Bairro"},on:{input:function(e){t.delayTouch(t.$v.district)}},model:{value:t.district,callback:function(e){t.district="string"===typeof e?e.trim():e},expression:"district"}}),t.$v.district.$error?a("ul",{staticClass:"field-error-message "},[t.$v.district.minLength?t._e():a("li",[t._v("\n                Bairro precisa ter no mínimo "+t._s(t.$v.district.$params.minLength.min)+" caracteres\n              ")])]):t._e()],1),a("div",{staticClass:"col-sm-4"},[a("ss-fg-input",{attrs:{type:"text",maxlength:"10",label:"Número",placeholder:"Número"},model:{value:t.number,callback:function(e){t.number="string"===typeof e?e.trim():e},expression:"number"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("ss-fg-input",{directives:[{name:"mask",rawName:"v-mask",value:"(##) #####-####",expression:"'(##) #####-####'"}],attrs:{type:"text",label:"Telefone",placeholder:"Telefone"},model:{value:t.phoneNumber,callback:function(e){t.phoneNumber="string"===typeof e?e.trim():e},expression:"phoneNumber"}})],1),a("div",{staticClass:"col-sm-6"},[a("ss-fg-input",{directives:[{name:"mask",rawName:"v-mask",value:"(##) #####-####",expression:"'(##) #####-####'"}],attrs:{type:"text",label:"Telefone 2",placeholder:"Telefone 2"},model:{value:t.phoneNumberTwo,callback:function(e){t.phoneNumberTwo="string"===typeof e?e.trim():e},expression:"phoneNumberTwo"}})],1)]),a("div",{staticClass:"text-center"},[a("p-button",{attrs:{type:"info",disabled:t.$v.$invalid||t.updatingUserProfile,round:""},nativeOn:{click:function(e){return e.preventDefault(),t.onUpdateProfile(e)}}},[t._v("\n            "+t._s(t.buttonText)+"\n          ")])],1),a("div",{staticClass:"clearfix"})])])]),a("change-password",{attrs:{email:t.email},on:{notifyVue:t.notifyVue}})],1)},io=[];function no(t){a("TUTV")}var oo=!1,so=no,ro=null,lo=null,co=Object(m["a"])(eo,ao,io,oo,so,ro,lo),uo=co.exports,po=a("YZ0n"),mo=a.n(po),fo={},ho=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[t._t("left-content")],2),a("div",{staticClass:"col-md-12"},[t._t("right-content")],2)])])])])])},vo=[];function go(t){a("bbuP")}var bo=!1,Co=go,wo=null,_o=null,yo=Object(m["a"])(fo,ho,vo,bo,Co,wo,_o),$o=yo.exports,xo={components:{VueCropper:mo.a,Modal:$o},data:function(){return{showModal:!1,readyToCrop:!1,cropOptions:{img:"http://ofyaji162.bkt.clouddn.com/bg1.jpg",info:!0,size:1,outputType:"jpeg",canScale:!1,autoCrop:!0,autoCropWidth:300,fixed:!0,fixedNumber:this.format,canMove:!1}}},props:{folder:String,fileName:String,format:Array},methods:{detectFiles:function(t){var e=this;if(t[0].size>5e6)this.$emit("fileIsTooBig",t[0].size);else{var a=new FileReader;a.onloadend=function(){e.cropOptions.img=a.result,e.readyToCrop=!0},a.readAsDataURL(t[0])}this.$refs.inputFile.value=""},finishCrop:function(){var t=this;this.$refs.cropper.getCropBlob(function(e){t.readyToCrop=!1,t.upload(e)})},upload:function(t){var e=this;this.$emit("uploading",{uploading:!0,fileName:this.fileName}),r.a.storage().ref().child("".concat(this.folder,"/").concat(this.fileName)).put(t).then(function(t){e.$emit("uploading",{uploading:!1,fileName:e.fileName})})}}},ko=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload-img-container"},[a("div",{staticClass:"modal-overlay"}),a("input",{ref:"inputFile",attrs:{title:"selecioe um arquivo",type:"file",accept:"image/jpeg"},on:{change:function(e){t.detectFiles(e.target.files)}}}),t.readyToCrop?a("modal",{on:{close:function(e){t.showModal=!1}}},[a("div",{attrs:{slot:"left-content"},slot:"left-content"},[a("vueCropper",{ref:"cropper",attrs:{slot:"body",img:t.cropOptions.img,info:t.cropOptions.info,size:t.cropOptions.size,outputType:t.cropOptions.outputType,canScale:t.cropOptions.canScale,autoCrop:t.cropOptions.autoCrop,autoCropWidth:t.cropOptions.autoCropWidth,autoCropHeight:t.cropOptions.autoCropHeight,fixed:t.cropOptions.fixed,fixedNumber:t.cropOptions.fixedNumber,canMove:t.cropOptions.canMove},slot:"body"})],1),a("div",{attrs:{slot:"right-content"},slot:"right-content"},[a("p-button",{staticClass:"btn-finish-crop",attrs:{type:"info",round:""},nativeOn:{click:function(e){return e.preventDefault(),t.finishCrop(e)}}},[t._v("Recortar")])],1)]):t._e()],1)},To=[];function Lo(t){a("ymRh")}var Po=!1,Ao=Lo,Eo=null,No=null,Oo=Object(m["a"])(xo,ko,To,Po,Ao,Eo,No),So=Oo.exports,Do={components:{UploadImage:So},props:{uid:String,name:String,surname:String,username:String,phoneNumber:String,email:String,dataLoaded:Boolean,profilePicture:String,coverPicture:String},methods:{onFileIsTooBig:function(t){this.$emit("fileIsTooBig",t)},onFileUploading:function(t){this.$emit("uploading",t)}}},Uo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("card",{staticClass:"card-user",staticStyle:{"padding-bottom":"20px"}},[a("div",{staticClass:"cover-pic-wrapper",attrs:{slot:"image"},slot:"image"},[t.coverPicture?a("img",{attrs:{src:t.coverPicture}}):a("div",{staticClass:"ss-inline-spinner el-center mg-tp-lg"})]),a("div",{staticClass:"author"},[a("div",{staticClass:"profile-pic-wrapper",class:{"profile-pic-wrapper-loading":!t.profilePicture},attrs:{slot:"image"},slot:"image"},[t.profilePicture?a("img",{staticClass:"avatar border-white background-white",attrs:{src:t.profilePicture,alt:""}}):a("div",{staticClass:"ss-inline-spinner el-center mg-tp-md"})]),t.dataLoaded?a("div",[a("div",{staticClass:"upload-photos-wrapper el-center"},[a("upload-image",{staticClass:"input-file",attrs:{folder:t.uid,fileName:"profile.jpg",format:[3,3]},on:{uploading:t.onFileUploading,fileIsTooBig:t.onFileIsTooBig}}),a("div",{staticClass:"btn-upload"},[t._v("alterar foto")]),a("upload-image",{staticClass:"input-file second",attrs:{folder:t.uid,fileName:"cover.jpg",format:[6,3]},on:{uploading:t.onFileUploading,fileIsTooBig:t.onFileIsTooBig}}),a("div",{staticClass:"btn-upload second"},[t._v("alterar capa")])],1),a("h4",{staticClass:"title"},[t._v(t._s(t.name)+" "+t._s(t.surname)+"\n        "),a("br"),a("small",[t._v("@"+t._s(t.username))])]),a("div",[t._v(t._s(t.phoneNumber))]),a("div",[t._v(t._s(t.email))])]):a("div",{staticClass:"ss-inline-spinner el-center mg-bt-md"})])])},qo=[];function jo(t){a("HuO0")}var Io=!1,Bo=jo,Fo=null,Mo=null,Vo=Object(m["a"])(Do,Uo,qo,Io,Bo,Fo,Mo),zo=Vo.exports,Ro={components:{EditProfileForm:uo,UserCard:zo},data:function(){return{uid:"",name:"",surname:"",username:"",phoneNumber:"",email:"",profilePictureUrl:"",coverPictureUrl:"",userDataLoaded:!1}},methods:{onUserDataIsLoaded:function(t){this.uid=t.uid,this.name=t.name,this.surname=t.surname,this.username=t.username,this.phoneNumber=t.phoneNumber,this.email=t.email,this.profilePictureUrl=t.profilePictureUrl,this.coverPictureUrl=t.coverPictureUrl,this.userDataLoaded=!0},onFileUploadingTooBig:function(t){this.notifyVue({verticalAlign:"bottom",horizontalAlign:"right",type:"danger",message:"Arquivo muito pesado. Por favor selecione uma imagem com no máximo 5mb",icon:"ti-thumb-down"})},onUploading:function(t){var e=this;if(t.uploading)t.fileName.includes("cover")?this.coverPictureUrl="":this.profilePictureUrl="";else{var a=this.$children.find(function(t){return"EditProfileForm"===t.$options.name});a.getImageUrl(this.uid,t.fileName).then(function(a){t.fileName.includes("cover")?e.coverPictureUrl="".concat(a,"&v=").concat(Date.now()):e.profilePictureUrl="".concat(a,"&v=").concat(Date.now())})}},notifyVue:function(t){this.$notify({message:t.message,icon:t.icon,horizontalAlign:t.horizontalAlign,verticalAlign:t.verticalAlign,type:t.type})}}},Go=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-4 col-lg-5 col-md-6"},[a("user-card",{attrs:{dataLoaded:t.userDataLoaded,uid:t.uid,name:t.name,surname:t.surname,username:t.username,phoneNumber:t.phoneNumber,email:t.email,profilePicture:t.profilePictureUrl,coverPicture:t.coverPictureUrl},on:{fileIsTooBig:t.onFileUploadingTooBig,uploading:t.onUploading}})],1),a("div",{staticClass:"col-xl-8 col-lg-7 col-md-6"},[a("edit-profile-form",{on:{notifyVue:t.notifyVue,userDataIsLoaded:t.onUserDataIsLoaded}})],1)])},Ho=[];function Wo(t){a("Bexm")}var Xo=!1,Yo=Wo,Zo=null,Jo=null,Ko=Object(m["a"])(Ro,Go,Ho,Xo,Yo,Zo,Jo),Qo=Ko.exports,ts=function(){var t=jt()(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=r.a.messaging(),a="BO6MVrpD0E1vqV4DnOTZZKQ_QV7DLnPzEcYh4cMPoqbjnZQ-oRex0NRYAccvgggxcby6YThrlmvUROeLs0eS3fk",e.usePublicVapidKey(a),e.onTokenRefresh(function(){console.log("onTokenRefresh")}),t.next=7,e.requestPermission();case 7:return console.log("Notificationf permission granted."),t.next=10,e.getToken();case 10:return t.abrupt("return",t.sent);case 13:t.prev=13,t.t0=t["catch"](0),console.error(t.t0);case 16:case"end":return t.stop()}},t,this,[[0,13]])}));return function(){return t.apply(this,arguments)}}(),es=function(t,e){console.log("saveUserPermissionToken",e);var a=r.a.firestore().collection("users_profile").doc(t);a.get().then(function(t){var i=(t.data().push_notifications_tokens||[]).filter(function(t){return t!==e});i.push(e),a.update({push_notifications_tokens:i})})},as=function(t,e){console.log("savePushNotificationEnable",t,e),r.a.firestore().collection("users_profile").doc(t).update({push_notifications_enable:e})},is={data:function(){return{pushNotificationsEnable:!1}},components:{ToggleButton:Te},computed:o()({},Object(c["c"])({stateUid:function(t){return t.users.user.uid},statePushNotificationsEnable:function(t){return t.users.user.push_notifications_enable}})),created:function(){this.pushNotificationsEnable=this.statePushNotificationsEnable},methods:o()({},Object(c["b"])(["updatePushNotificationsEnable"]),{onTogglePushNotifications:function(){var t=jt()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(as(this.stateUid,this.pushNotificationsEnable),this.updatePushNotificationsEnable(this.pushNotificationsEnable),!this.pushNotificationsEnable){t.next=7;break}return t.next=5,ts();case 5:e=t.sent,e?es(this.stateUid,e):(this.pushNotificationsEnable=!1,this.updatePushNotificationsEnable(this.pushNotificationsEnable),console.log("No Instance ID token available. Request permission to generate one."));case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()})},ns=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",[t._v("Configurações")]),a("toggle-button",{on:{change:t.onTogglePushNotifications},model:{value:t.pushNotificationsEnable,callback:function(e){t.pushNotificationsEnable=e},expression:"pushNotificationsEnable"}}),a("span",{staticClass:"d-inline-block position-relative mg-lf-xxs",staticStyle:{top:"-2px"}},[t._v("Receber Push Notifications")])],1)},os=[];function ss(t){a("d371")}var rs=!1,ls=ss,cs=null,ds=null,us=Object(m["a"])(is,ns,os,rs,ls,cs,ds),ps=us.exports,ms={components:{PaperTable:qe},data:function(){return{dataLoaded:!1,table:{title:"Usuários Cadastrados no Sistema",columns:["Nome","Username","Nivel"],data:[]}}},created:function(){var t=jt()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=function(){return new Promise(function(t){r.a.firestore().collection("users_profile").get().then(function(e){var a=[];e.forEach(function(t){a.push({id:t.id,nome:"".concat(t.data().name," ").concat(t.data().surname),nivel:t.data().isAdmin?"admin":"cliente",username:t.data().username,status:t.data().disabled?"desativado":"ativado"})}),t(a)})})},t.next=3,e();case 3:this.table.data=t.sent,this.dataLoaded=!0;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),mounted:function(){1==this.$route.query.edited&&this.notifyVue("bottom","right","success","Usuário atualizado com sucesso","ti-thumb-up"),1==this.$route.query.created&&this.notifyVue("bottom","right","success","Usuário criado com sucesso","ti-thumb-up")},methods:{onNewUserClick:function(){this.$router.replace("create")},onEditUserData:function(t){this.$router.push(t)},notifyVue:function(t,e,a,i,n){this.$notify({message:i,icon:n,horizontalAlign:e,verticalAlign:t,type:a})}}},fs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("card",{attrs:{title:t.table.title}},[a("div",{attrs:{slot:"card-header-buttons"},slot:"card-header-buttons"},[a("p-button",{attrs:{type:"success",round:""},nativeOn:{click:function(e){return e.preventDefault(),t.onNewUserClick(e)}}},[a("i",{staticClass:"ti-plus"}),t._v(" Adicionar Novo Usuário\n        ")])],1),a("div",{staticClass:"table-responsive no-border",attrs:{slot:"raw-content"},slot:"raw-content"},[t.dataLoaded?t._e():a("div",{staticClass:"ss-inline-spinner el-center mg-tp-md mg-bt-md"}),t.dataLoaded?a("paper-table",{attrs:{editButton:!0,data:t.table.data,columns:t.table.columns},on:{editData:t.onEditUserData}}):t._e()],1)])],1)])},hs=[];function vs(t){a("GEnR")}var gs=!1,bs=vs,Cs="data-v-3ce462c8",ws=null,_s=Object(m["a"])(ms,fs,hs,gs,bs,Cs,ws),ys=_s.exports,$s=a("fKPv"),xs=a.n($s),ks=new WeakMap,Ts={directives:{mask:Oi["mask"]},mixins:[Pi["validationMixin"],vi],data:function(){return{username:"",email:"",password:"",repeatPassword:"",phoneNumber:"",phoneNumberTwo:"",name:"",surname:"",address:"",city:"",district:"",number:"",estate:"",postalCode:"",searchingPostalCode:!1,checkingEmail:!1,checkingUsername:!1,isAdmin:0,buttonText:"Criar usuário",creatingUser:!1}},validations:{name:{required:Li["required"],minLength:Object(Li["minLength"])(4)},surname:{required:Li["required"],minLength:Object(Li["minLength"])(4)},username:{required:Li["required"],minLength:Object(Li["minLength"])(4),isUnique:function(t){var e=this;return this.checkingUsername=!0,""===t?(this.checkingUsername=!1,!0):new Promise(function(a,i){r.a.firestore().collection("users_profile").where("username","==",t).get().then(function(t){e.checkingUsername=!1,a(t.empty)})})}},email:{required:Li["required"],email:Li["email"],isUnique:function(t){var e=this;return this.checkingEmail=!0,""===t?(this.checkingEmail=!1,!0):new Promise(function(a,i){r.a.firestore().collection("users_profile").where("email","==",t).get().then(function(t){e.checkingEmail=!1,a(t.empty)})})}},password:{required:Li["required"],minLength:Object(Li["minLength"])(6)},repeatPassword:{sameAsPassword:Object(Li["sameAs"])("password")},postalCode:{isValid:function(t){var e=this;return""===t||new Promise(function(t,a){e.address="",e.city="",e.estate="",e.district="",e.searchingPostalCode=!0,Ni.a.get("https://viacep.com.br/ws/".concat(e.postalCode,"/json/")).then(function(a){a.data.erro&&(e.searchingPostalCode=!1,t(!1)),e.address=a.data.logradouro,e.city=a.data.localidade,e.estate=a.data.uf,e.district=a.data.bairro,e.searchingPostalCode=!1,t(!0)},function(a){e.searchingPostalCode=!1,t(!1)})})}},city:{minLength:Object(Li["minLength"])(4)},estate:{minLength:Object(Li["minLength"])(2),maxLength:Object(Li["maxLength"])(2)},address:{minLength:Object(Li["minLength"])(4)},district:{minLength:Object(Li["minLength"])(4)}},computed:o()({},Object(c["c"])({stateUid:function(t){return t.users.user.uid}})),methods:{onGoBack:function(){this.$router.replace("list")},delayTouch:function(t){t.$reset(),ks.has(t)&&clearTimeout(ks.get(t)),ks.set(t,setTimeout(t.$touch,1e3))},onFormSubmit:function(){var t=this;this.buttonText="Criando usuário...",this.creatingUser=!0,this.$v.$touch(),r.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(function(e){var a;e.user.updateProfile({displayName:t.username}).catch(function(e){console.log("displayname couldn't be updated ".concat(e)),un.logError((new Date).getTime(),"displayname couldn't be updated (fail or catch): ".concat(e.message),"createUser","update displayName",t.stateUid)});var i=(a={date:Date.now(),name:t.name,surname:t.surname,email:t.email,username:t.username,postalCode:t.postalCode,city:t.city,estate:t.estate.toUpperCase(),address:t.address,number:t.number,district:t.district,phoneNumber:t.phoneNumber},xs()(a,"phoneNumber",t.phoneNumber),xs()(a,"phoneNumberTwo",t.phoneNumberTwo),xs()(a,"isAdmin",Boolean(Number(t.isAdmin))),xs()(a,"push_notifications_tokens",[]),xs()(a,"push_notifications_enable",!1),a);r.a.firestore().collection("users_profile").doc(e.user.uid).set(i).then(function(){t.$router.replace("list?created=1")},function(e){t.buttonText="Criar usuário",t.creatingUser=!1,t.notifyVue("bottom","right","danger","O perfil do usuário não pode ser criado: erro desconhecido","ti-thumb-down"),un.logError((new Date).getTime(),"create user profile fail: ".concat(e.message),"createUser","create user profile",t.stateUid)})}).catch(function(e){t.buttonText="Criar usuário",t.creatingUser=!1,t.notifyVue("bottom","right","danger","O usuário não pode ser criado: erro inesperado","ti-thumb-down"),un.logError((new Date).getTime(),"user account create fail or catch: ".concat(e.message),"createUser","create user account",t.stateUid)})},notifyVue:function(t,e,a,i,n){this.$notify({message:i,icon:n,horizontalAlign:e,verticalAlign:t,type:a})}}},Ls=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a",{staticClass:"back-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onGoBack(e)}}},[a("i",{staticClass:"ti-arrow-left"}),t._v(" Voltar\n  ")]),a("card",{staticClass:"card",attrs:{title:"Novo Usuário"}},[a("div",[a("form",{on:{submit:function(e){return e.preventDefault(),t.onFormSubmit(e)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label",attrs:{for:"isAdmin"}},[t._v("Nível")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.isAdmin,expression:"isAdmin"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.isAdmin=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"0"}},[t._v("Cliente")]),a("option",{attrs:{value:"1"}},[t._v("Admin")])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("ss-fg-input",{class:{"has-error":t.$v.name.$error},attrs:{type:"text",label:"Nome",placeholder:"Nome"},on:{input:function(e){t.delayTouch(t.$v.name)}},model:{value:t.name,callback:function(e){t.name="string"===typeof e?e.trim():e},expression:"name"}}),t.$v.name.$error?a("ul",{staticClass:"field-error-message"},[t.$v.name.required?t._e():a("li",[t._v("\n                Campo requerido\n              ")]),t.$v.name.minLength?t._e():a("li",[t._v("\n                Nome precisa ter no mínimo "+t._s(t.$v.name.$params.minLength.min)+" caracteres\n              ")])]):t._e()],1),a("div",{staticClass:"col-md-6"},[a("ss-fg-input",{class:{"has-error":t.$v.surname.$error},attrs:{type:"text",label:"Sobrenome",placeholder:"Sobrenome"},on:{input:function(e){t.delayTouch(t.$v.surname)}},model:{value:t.surname,callback:function(e){t.surname="string"===typeof e?e.trim():e},expression:"surname"}}),t.$v.surname.$error?a("ul",{staticClass:"field-error-message"},[t.$v.surname.required?t._e():a("li",[t._v("\n                Campo requerido\n              ")]),t.$v.surname.minLength?t._e():a("li",[t._v("\n                Sobrenome precisa ter no mínimo "+t._s(t.$v.surname.$params.minLength.min)+" caracteres\n              ")])]):t._e()],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("ss-fg-input",{class:{"has-error":t.$v.email.$error},attrs:{spinner:t.checkingEmail,maxlength:"200",type:"email",label:"Email",placeholder:"Email"},on:{input:function(e){t.delayTouch(t.$v.email)}},model:{value:t.email,callback:function(e){t.email="string"===typeof e?e.trim():e},expression:"email"}}),t.$v.email.$error?a("ul",{staticClass:"field-error-message"},[t.$v.email.required?t._e():a("li",[t._v("\n                Campo requerido\n              ")]),t.$v.email.email?t._e():a("li",[t._v("\n                Esse e-mail não é um e-mail válido\n              ")]),t.$v.email.isUnique?t._e():a("li",[t._v("\n                Esse e-mail já está em uso\n              ")])]):t._e()],1),a("div",{staticClass:"col-md-6"},[a("ss-fg-input",{class:{"has-error":t.$v.username.$error},attrs:{spinner:t.checkingUsername,maxlength:"50",type:"text",label:"Username",placeholder:"Username"},on:{input:function(e){t.delayTouch(t.$v.username)}},model:{value:t.username,callback:function(e){t.username="string"===typeof e?e.trim():e},expression:"username"}}),t.$v.username.$error?a("ul",{staticClass:"field-error-message"},[t.$v.username.required?t._e():a("li",[t._v("\n                Campo requerido\n              ")]),t.$v.username.minLength?t._e():a("li",[t._v("\n                Username precisa ter no mínimo "+t._s(t.$v.username.$params.minLength.min)+" caracteres\n              ")]),t.$v.username.isUnique?t._e():a("li",[t._v("\n                Esse username já está em uso\n              ")])]):t._e()],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("ss-fg-input",{class:{"has-error":t.$v.password.$error},attrs:{type:"password",label:"Senha",placeholder:"Senha"},on:{input:function(e){t.delayTouch(t.$v.password)}},model:{value:t.password,callback:function(e){t.password="string"===typeof e?e.trim():e},expression:"password"}}),t.$v.password.$error?a("ul",{staticClass:"field-error-message"},[t.$v.password.required?t._e():a("li",[t._v("\n                Campo requerido\n              ")]),t.$v.password.minLength?t._e():a("li",[t._v("\n                Senha precisa ter no mínimo "+t._s(t.$v.password.$params.minLength.min)+" caracteres\n              ")])]):t._e()],1),a("div",{staticClass:"col-md-6"},[a("ss-fg-input",{class:{"has-error":t.$v.repeatPassword.$error},attrs:{type:"password",label:"Confirme a Senha",placeholder:"Confirme a Senha"},on:{input:function(e){t.delayTouch(t.$v.repeatPassword)}},model:{value:t.repeatPassword,callback:function(e){t.repeatPassword="string"===typeof e?e.trim():e},expression:"repeatPassword"}}),t.$v.repeatPassword.$error?a("ul",{staticClass:"field-error-message"},[t.$v.repeatPassword.sameAsPassword?t._e():a("li",[t._v("\n                As senhas devem ser iguais\n              ")])]):t._e()],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("ss-fg-input",{directives:[{name:"mask",rawName:"v-mask",value:"#####-###",expression:"'#####-###'"}],class:{"has-error":t.$v.postalCode.$error},attrs:{spinner:t.searchingPostalCode,type:"text",maxlength:"9",label:"CEP",placeholder:"CEP"},on:{input:function(e){t.delayTouch(t.$v.postalCode)}},model:{value:t.postalCode,callback:function(e){t.postalCode="string"===typeof e?e.trim():e},expression:"postalCode"}}),t.$v.postalCode.$error?a("ul",{staticClass:"field-error-message "},[t.$v.postalCode.isValid?t._e():a("li",[t._v("\n                Esse CEP não é válido\n              ")])]):t._e()],1),a("div",{staticClass:"col-md-8"},[a("ss-fg-input",{class:{"has-error":t.$v.city.$error},attrs:{type:"text",label:"Cidade",placeholder:"Cidade",maxlength:"50"},on:{input:function(e){t.delayTouch(t.$v.city)}},model:{value:t.city,callback:function(e){t.city="string"===typeof e?e.trim():e},expression:"city"}}),t.$v.city.$error?a("ul",{staticClass:"field-error-message "},[t.$v.city.minLength?t._e():a("li",[t._v("\n                Cidade precisa ter no mínimo "+t._s(t.$v.city.$params.minLength.min)+" caracteres\n              ")])]):t._e()],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("ss-fg-input",{class:{"has-error":t.$v.estate.$error},attrs:{uppercase:!0,type:"text",label:"UF",maxlength:"2",placeholder:"UF"},on:{input:function(e){t.delayTouch(t.$v.estate)}},model:{value:t.estate,callback:function(e){t.estate="string"===typeof e?e.trim():e},expression:"estate"}}),t.$v.estate.$error?a("ul",{staticClass:"field-error-message "},[t.$v.estate.minLength&&t.$v.estate.maxLength?t._e():a("li",[t._v("\n                UF precisa ter "+t._s(t.$v.estate.$params.minLength.min)+" caracteres\n              ")])]):t._e()],1),a("div",{staticClass:"col-md-6"},[a("ss-fg-input",{class:{"has-error":t.$v.address.$error},attrs:{maxlength:"100",type:"text",label:"Endereço",placeholder:"Endereço"},on:{input:function(e){t.delayTouch(t.$v.address)}},model:{value:t.address,callback:function(e){t.address="string"===typeof e?e.trim():e},expression:"address"}}),t.$v.address.$error?a("ul",{staticClass:"field-error-message "},[t.$v.address.minLength?t._e():a("li",[t._v("\n                Endereço precisa ter no mínimo "+t._s(t.$v.address.$params.minLength.min)+" caracteres\n              ")])]):t._e()],1),a("div",{staticClass:"col-md-2"},[a("ss-fg-input",{attrs:{type:"text",maxlength:"10",label:"Número",placeholder:"Número"},model:{value:t.number,callback:function(e){t.number="string"===typeof e?e.trim():e},expression:"number"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("ss-fg-input",{class:{"has-error":t.$v.district.$error},attrs:{type:"text",label:"Bairro",placeholder:"Bairro"},on:{input:function(e){t.delayTouch(t.$v.district)}},model:{value:t.district,callback:function(e){t.district="string"===typeof e?e.trim():e},expression:"district"}}),t.$v.district.$error?a("ul",{staticClass:"field-error-message "},[t.$v.district.minLength?t._e():a("li",[t._v("\n                Bairro precisa ter no mínimo "+t._s(t.$v.district.$params.minLength.min)+" caracteres\n              ")])]):t._e()],1),a("div",{staticClass:"col-md-4"},[a("ss-fg-input",{directives:[{name:"mask",rawName:"v-mask",value:"(##) #####-####",expression:"'(##) #####-####'"}],attrs:{type:"text",label:"Telefone",placeholder:"Telefone"},model:{value:t.phoneNumber,callback:function(e){t.phoneNumber="string"===typeof e?e.trim():e},expression:"phoneNumber"}})],1),a("div",{staticClass:"col-md-4"},[a("ss-fg-input",{directives:[{name:"mask",rawName:"v-mask",value:"(##) #####-####",expression:"'(##) #####-####'"}],attrs:{type:"text",label:"Telefone 2",placeholder:"Telefone 2"},model:{value:t.phoneNumberTwo,callback:function(e){t.phoneNumberTwo="string"===typeof e?e.trim():e},expression:"phoneNumberTwo"}})],1)]),a("div",{staticClass:"text-center "},[a("p-button",{attrs:{type:"info",nativeType:"submit",disabled:t.$v.$invalid||t.creatingUser,round:""}},[t._v("\n            "+t._s(t.buttonText)+"\n          ")])],1),a("div",{staticClass:"clearfix"})])]),a("a",{staticClass:"back-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onGoBack(e)}}},[a("i",{staticClass:"ti-arrow-left"}),t._v(" Voltar\n    ")])])],1)},Ps=[];function As(t){a("XvZZ")}var Es=!1,Ns=As,Os="data-v-7537880f",Ss=null,Ds=Object(m["a"])(Ts,Ls,Ps,Es,Ns,Os,Ss),Us=Ds.exports,qs={data:function(){return{username:"",email:"",password:"",repeatPassword:"",phoneNumber:"",phoneNumberTwo:"",name:"",surname:"",address:"",city:"",district:"",number:"",estate:"",postalCode:"",searchingPostalCode:!1,checkingEmail:!1,checkingUsername:!1,isAdmin:0,buttonText:"Editar usuário",editingUser:!1}},created:function(){var t=this;r.a.firestore().collection("users_profile").doc(this.$route.params.id).get().then(function(e){t.name=e.data().name,t.surname=e.data().surname,t.email=e.data().email,t.username=e.data().username,t.postalCode=e.data().postalCode,t.city=e.data().city,t.estate=e.data().estate,t.address=e.data().address,t.number=e.data().number,t.district=e.data().district,t.phoneNumber=e.data().phoneNumber,t.phoneNumber=e.data().phoneNumber,t.phoneNumberTwo=e.data().phoneNumberTwo,t.isAdmin=Number(e.data().isAdmin)}).catch(function(e){console.log("user profile couldn't be find ".concat(e)),t.notifyVue("bottom","right","danger","O perfil do usuário não pode ser encontrado: erro inesperado","ti-thumb-down")})},methods:{onGoBack:function(){this.$router.replace("list")},onEditUser:function(){var t=this;this.buttonText="Editando usuário...",this.editingUser=!0,r.a.firestore().collection("users_profile").doc(this.$route.params.id).update({isAdmin:Boolean(Number(this.isAdmin))}).then(function(){t.$router.replace("list?edited=1")}).catch(function(e){console.log("user couldn't be updated ".concat(e)),t.notifyVue("bottom","right","danger","O usuário não pode ser atualizado: erro inesperado","ti-thumb-down"),t.buttonText="Editar usuário...",t.editingUser=!1})},notifyVue:function(t,e,a,i,n){this.$notify({message:i,icon:n,horizontalAlign:e,verticalAlign:t,type:a})}}},js=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("card",{staticClass:"card",attrs:{title:"Editar Usuário"}},[a("a",{staticClass:"back-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onGoBack(e)}}},[a("i",{staticClass:"ti-arrow-left"}),t._v(" Voltar\n  ")]),a("div",[a("form",{on:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label",attrs:{for:"isAdmin"}},[t._v("Nível")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.isAdmin,expression:"isAdmin"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.isAdmin=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"0"}},[t._v("Cliente")]),a("option",{attrs:{value:"1"}},[t._v("Admin")])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("ss-fg-input",{attrs:{readonly:"",type:"text",label:"Nome",placeholder:"Nome"},model:{value:t.name,callback:function(e){t.name="string"===typeof e?e.trim():e},expression:"name"}})],1),a("div",{staticClass:"col-md-6"},[a("ss-fg-input",{attrs:{readonly:"",type:"text",label:"Sobrenome",placeholder:"Sobrenome"},model:{value:t.surname,callback:function(e){t.surname="string"===typeof e?e.trim():e},expression:"surname"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("ss-fg-input",{attrs:{readonly:"",type:"email",label:"Email",placeholder:"Email"},model:{value:t.email,callback:function(e){t.email="string"===typeof e?e.trim():e},expression:"email"}})],1),a("div",{staticClass:"col-md-6"},[a("ss-fg-input",{attrs:{readonly:"",type:"text",label:"Username",placeholder:"Username"},model:{value:t.username,callback:function(e){t.username="string"===typeof e?e.trim():e},expression:"username"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("ss-fg-input",{attrs:{readonly:"",type:"text",label:"CEP",placeholder:"CEP"},model:{value:t.postalCode,callback:function(e){t.postalCode="string"===typeof e?e.trim():e},expression:"postalCode"}})],1),a("div",{staticClass:"col-md-8"},[a("ss-fg-input",{attrs:{readonly:"",type:"text",label:"Cidade",placeholder:"Cidade",maxlength:"50"},model:{value:t.city,callback:function(e){t.city="string"===typeof e?e.trim():e},expression:"city"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("ss-fg-input",{attrs:{readonly:"",uppercase:!0,type:"text",label:"UF",maxlength:"2",placeholder:"UF"},model:{value:t.estate,callback:function(e){t.estate="string"===typeof e?e.trim():e},expression:"estate"}})],1),a("div",{staticClass:"col-md-6"},[a("ss-fg-input",{attrs:{readonly:"",type:"text",label:"Endereço",placeholder:"Endereço"},model:{value:t.address,callback:function(e){t.address="string"===typeof e?e.trim():e},expression:"address"}})],1),a("div",{staticClass:"col-md-2"},[a("ss-fg-input",{attrs:{readonly:"",type:"text",maxlength:"10",label:"Número",placeholder:"Número"},model:{value:t.number,callback:function(e){t.number="string"===typeof e?e.trim():e},expression:"number"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("ss-fg-input",{attrs:{readonly:"",type:"text",label:"Bairro",placeholder:"Bairro"},model:{value:t.district,callback:function(e){t.district="string"===typeof e?e.trim():e},expression:"district"}})],1),a("div",{staticClass:"col-md-4"},[a("ss-fg-input",{attrs:{readonly:"",type:"text",label:"Telefone",placeholder:"Telefone"},model:{value:t.phoneNumber,callback:function(e){t.phoneNumber="string"===typeof e?e.trim():e},expression:"phoneNumber"}})],1),a("div",{staticClass:"col-md-4"},[a("ss-fg-input",{attrs:{readonly:"",type:"text",label:"Telefone 2",placeholder:"Telefone 2"},model:{value:t.phoneNumberTwo,callback:function(e){t.phoneNumberTwo="string"===typeof e?e.trim():e},expression:"phoneNumberTwo"}})],1)]),a("div",{staticClass:"text-center "},[a("p-button",{attrs:{type:"info",disabled:t.editingUser,round:""},nativeOn:{click:function(e){return e.preventDefault(),t.onEditUser(e)}}},[t._v("\n          "+t._s(t.buttonText)+"\n        ")])],1),a("div",{staticClass:"clearfix"})])]),a("a",{staticClass:"back-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onGoBack(e)}}},[a("i",{staticClass:"ti-arrow-left"}),t._v(" Voltar\n  ")])])},Is=[];function Bs(t){a("6pCo")}var Fs=!1,Ms=Bs,Vs="data-v-dc472c80",zs=null,Rs=Object(m["a"])(qs,js,Is,Fs,Ms,Vs,zs),Gs=Rs.exports,Hs=new WeakMap,Ws={directives:{mask:Oi["mask"]},mixins:[Pi["validationMixin"],vi],data:function(){return{clients:[],place:{name:"",owner:"",location:{postalCode:"",city:"",estate:"",address:"",number:"",district:""}},buttonText:"Cadastrar local",creatingPlace:!1,placeCreated:!1,searchingPostalCode:!1}},validations:{place:{owner:{required:Li["required"]},name:{required:Li["required"],minLength:Object(Li["minLength"])(3)},location:{postalCode:{required:Li["required"],isValid:function(t){var e=this;return""===t||new Promise(function(t,a){e.place.location.city="",e.place.location.estate="",e.place.location.address="",e.place.location.district="",e.searchingPostalCode=!0,Ni.a.get("https://viacep.com.br/ws/".concat(e.place.location.postalCode,"/json/")).then(function(a){a.data.erro&&(e.searchingPostalCode=!1,t(!1)),e.place.location.city=a.data.localidade,e.place.location.estate=a.data.uf,e.place.location.address=a.data.logradouro,e.place.location.district=a.data.bairro,e.searchingPostalCode=!1,t(!0)},function(a){e.searchingPostalCode=!1,t(!1)})})}},city:{required:Li["required"],minLength:Object(Li["minLength"])(4)},estate:{required:Li["required"],minLength:Object(Li["minLength"])(2),maxLength:Object(Li["maxLength"])(2)},address:{required:Li["required"],minLength:Object(Li["minLength"])(4)},district:{required:Li["required"],minLength:Object(Li["minLength"])(4)},number:{required:Li["required"]}}}},created:function(){var t=this,e=function(){return new Promise(function(t){r.a.firestore().collection("users_profile").where("isAdmin","==",!1).get().then(function(e){var a=[];e.forEach(function(t){var e=Object.assign(t.data(),{id:t.id});a.push(e)}),t(a)})})};e().then(function(e){t.clients=e,t.place.owner=t.$route.query.clientId})},methods:{onGoBack:function(){this.$router.replace("list?clientId=".concat(this.place.owner))},delayTouch:function(t){t.$reset(),Hs.has(t)&&clearTimeout(Hs.get(t)),Hs.set(t,setTimeout(t.$touch,1e3))},onFormSubmit:function(){var t=this;this.buttonText="Cadastrando local...",this.creatingPlace=!0,this.$v.$touch();var e={date:Date.now(),name:this.place.name,owner:this.place.owner,location:{postalCode:this.place.location.postalCode,city:this.place.location.city,estate:this.place.location.estate.toUpperCase(),address:this.place.location.address,number:this.place.location.number,district:this.place.location.district},disabled:!1};r.a.firestore().collection("places").add(e).then(function(e){t.placeCreated=!0}).catch(function(e){console.log("place couldn't be created ".concat(e)),t.buttonText="Cadastrar local",t.creatingPlace=!1,t.notifyVue("bottom","right","danger","O local não pode ser criado: erro desconhecido","ti-thumb-down")})},resetForm:function(){var t=this;this.place.name="",this.place.location.postalCode="",this.place.location.city="",this.place.location.estate="",this.place.location.district="",this.place.location.address="",this.place.location.number="",this.buttonText="Cadastrar local",this.creatingPlace=!1,this.placeCreated=!1,this.$nextTick(function(){t.$v.$reset()})},notifyVue:function(t,e,a,i,n){this.$notify({message:i,icon:n,horizontalAlign:e,verticalAlign:t,type:a})}}},Xs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.placeCreated?a("div",[t._m(0),a("p-button",{staticClass:"mg-rg-sm",attrs:{type:"info",round:""},nativeOn:{click:function(e){return e.preventDefault(),t.resetForm(e)}}},[t._v("\n      Cadastrar outro\n    ")]),a("a",{staticClass:"back-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onGoBack(e)}}},[t._v("\n      Voltar para a listagem\n    ")])],1):t._e(),t.placeCreated?t._e():a("div",[a("a",{staticClass:"back-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onGoBack(e)}}},[a("i",{staticClass:"ti-arrow-left"}),t._v(" Voltar\n    ")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.onFormSubmit(e)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[t._m(1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.place.owner,expression:"place.owner"}],staticClass:"form-control",class:{"has-error":t.$v.place.owner.$error},attrs:{id:"owner"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.place,"owner",e.target.multiple?a:a[0])}}},[a("option",{attrs:{disabled:"",value:""}},[t._v("Selecione um cliente")]),t._l(t.clients,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                "+t._s(e.name)+"\n              ")])})],2),t.$v.place.owner.$error?a("ul",{staticClass:"field-error-message"},[t.$v.place.owner.required?t._e():a("li",[t._v("\n                Por favor, selecione um cliente\n              ")])]):t._e()])])]),t._m(2),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("ss-fg-input",{class:{"has-error":t.$v.place.name.$error},attrs:{type:"text",label:"Nome",placeholder:"Nome"},on:{input:function(e){t.delayTouch(t.$v.place.name)}},model:{value:t.place.name,callback:function(e){t.$set(t.place,"name","string"===typeof e?e.trim():e)},expression:"place.name"}}),t.$v.place.name.$error?a("ul",{staticClass:"field-error-message"},[t.$v.place.name.required?t._e():a("li",[t._v("\n              Campo requerido\n            ")]),t.$v.place.name.minLength?t._e():a("li",[t._v("\n              Nome precisa ter no mínimo "+t._s(t.$v.place.name.$params.minLength.min)+" caracteres\n            ")])]):t._e()],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("ss-fg-input",{directives:[{name:"mask",rawName:"v-mask",value:"#####-###",expression:"'#####-###'"}],class:{"has-error":t.$v.place.location.postalCode.$error},attrs:{spinner:t.searchingPostalCode,type:"text",maxlength:"9",label:"CEP",placeholder:"CEP"},on:{input:function(e){t.delayTouch(t.$v.place.location.postalCode)}},model:{value:t.place.location.postalCode,callback:function(e){t.$set(t.place.location,"postalCode","string"===typeof e?e.trim():e)},expression:"place.location.postalCode"}}),t.$v.place.location.postalCode.$error?a("ul",{staticClass:"field-error-message "},[t.$v.place.location.postalCode.required?t._e():a("li",[t._v("\n              Campo requerido\n            ")]),t.$v.place.location.postalCode.isValid?t._e():a("li",[t._v("\n              Esse CEP não é válido\n            ")])]):t._e()],1),a("div",{staticClass:"col-md-8"},[a("ss-fg-input",{class:{"has-error":t.$v.place.location.district.$error},attrs:{type:"text",label:"Bairro",placeholder:"Bairro"},on:{input:function(e){t.delayTouch(t.$v.place.location.district)}},model:{value:t.place.location.district,callback:function(e){t.$set(t.place.location,"district","string"===typeof e?e.trim():e)},expression:"place.location.district"}}),t.$v.place.location.district.$error?a("ul",{staticClass:"field-error-message "},[t.$v.place.location.district.required?t._e():a("li",[t._v("\n              Campo requerido\n            ")]),t.$v.place.location.district.minLength?t._e():a("li",[t._v("\n              Bairro precisa ter no mínimo "+t._s(t.$v.place.location.district.$params.minLength.min)+" caracteres\n            ")])]):t._e()],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-10"},[a("ss-fg-input",{class:{"has-error":t.$v.place.location.city.$error},attrs:{type:"text",label:"Cidade",placeholder:"Cidade",maxlength:"50"},on:{input:function(e){t.delayTouch(t.$v.place.location.city)}},model:{value:t.place.location.city,callback:function(e){t.$set(t.place.location,"city","string"===typeof e?e.trim():e)},expression:"place.location.city"}}),t.$v.place.location.city.$error?a("ul",{staticClass:"field-error-message "},[t.$v.place.location.city.required?t._e():a("li",[t._v("\n              Campo requerido\n            ")]),t.$v.place.location.city.minLength?t._e():a("li",[t._v("\n              Cidade precisa ter no mínimo "+t._s(t.$v.place.location.city.$params.minLength.min)+" caracteres\n            ")])]):t._e()],1),a("div",{staticClass:"col-md-2"},[a("ss-fg-input",{class:{"has-error":t.$v.place.location.estate.$error},attrs:{uppercase:!0,type:"text",label:"UF",maxlength:"2",placeholder:"UF"},on:{input:function(e){t.delayTouch(t.$v.place.location.estate)}},model:{value:t.place.location.estate,callback:function(e){t.$set(t.place.location,"estate","string"===typeof e?e.trim():e)},expression:"place.location.estate"}}),t.$v.place.location.estate.$error?a("ul",{staticClass:"field-error-message "},[t.$v.place.location.estate.required?t._e():a("li",[t._v("\n              Campo requerido\n            ")]),t.$v.place.location.estate.minLength&&t.$v.place.location.estate.maxLength?t._e():a("li",[t._v("\n              UF precisa ter "+t._s(t.$v.place.location.estate.$params.minLength.min)+" caracteres\n            ")])]):t._e()],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("ss-fg-input",{class:{"has-error":t.$v.place.location.address.$error},attrs:{maxlength:"100",type:"text",label:"Endereço",placeholder:"Endereço"},on:{input:function(e){t.delayTouch(t.$v.place.location.address)}},model:{value:t.place.location.address,callback:function(e){t.$set(t.place.location,"address","string"===typeof e?e.trim():e)},expression:"place.location.address"}}),t.$v.place.location.address.$error?a("ul",{staticClass:"field-error-message "},[t.$v.place.location.address.required?t._e():a("li",[t._v("\n              Campo requerido\n            ")]),t.$v.place.location.address.minLength?t._e():a("li",[t._v("\n              Endereço precisa ter no mínimo "+t._s(t.$v.place.location.address.$params.minLength.min)+" caracteres\n            ")])]):t._e()],1),a("div",{staticClass:"col-md-4"},[a("ss-fg-input",{class:{"has-error":t.$v.place.location.number.$error},attrs:{type:"text",maxlength:"10",label:"Número",placeholder:"Número"},on:{input:function(e){t.delayTouch(t.$v.place.location.number)}},model:{value:t.place.location.number,callback:function(e){t.$set(t.place.location,"number","string"===typeof e?e.trim():e)},expression:"place.location.number"}}),t.$v.place.location.number.$error?a("ul",{staticClass:"field-error-message "},[t.$v.place.location.number.required?t._e():a("li",[t._v("\n              Campo requerido\n            ")])]):t._e()],1)]),a("div",{staticClass:"text-center"},[a("p-button",{attrs:{type:"info",nativeType:"submit",disabled:t.$v.$invalid||t.creatingPlace,round:""}},[t._v("\n          "+t._s(t.buttonText)+"\n        ")])],1),a("div",{staticClass:"clearfix"})])])])},Ys=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-success"},[a("i",{staticClass:"ti-check mg-rg-xxs"}),a("b",[t._v("Local cadastrado com sucesso")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",[a("label",{staticClass:"control-label",attrs:{for:"owner"}},[t._v("Cliente")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h4",[t._v("Informações do Local")])])])}];function Zs(t){a("CJbz")}var Js=!1,Ks=Zs,Qs=null,tr=null,er=Object(m["a"])(Ws,Xs,Ys,Js,Ks,Qs,tr),ar=er.exports,ir=[{path:"/",component:E,redirect:"/login",children:[{path:"login",component:Wt}]},{path:"/dashboard",meta:{requiresAuth:!0},component:Tt,redirect:"/dashboard/index",children:[{path:"index",component:E,redirect:"/dashboard/index/places",children:[{path:"places",component:E,redirect:"/dashboard/index/places/list",children:[{path:"list",name:"locais",component:Ti},{path:"create",name:"novo local",component:ar,meta:{requiresAdmin:!0}},{path:":placeId/towers/list",name:"torres do local",component:Gi},{path:":placeId/towers/create",name:"nova torre",component:Sn,meta:{requiresAdmin:!0}},{path:":placeId/tower/:towerId/edit",name:"editar torre",component:Rn,meta:{requiresAdmin:!0}},{path:":placeId/tower/:towerId/alerts",name:"alertas da torre",component:yn},{path:":placeId/tower/:towerId/details",name:"detalhes da torre",component:dn}]},{path:"settings",name:"configurações",component:ps}]},{path:"/dashboard/user-profile",name:"Perfil",component:Qo},{path:"users",meta:{requiresAdmin:!0},component:E,redirect:"users/list",children:[{path:"list",name:"usuários",component:ys},{path:"create",name:"usuários",component:Us},{path:":id",name:"usuários",component:Gs}]}]},{path:"*",component:Ut}],nr=ir,or={access:{timestamp:"",ip:""}},sr={},rr={},lr={user:{uid:"",username:"",isAdmin:!1,push_notifications_enable:!1}},cr={UPDATE_USER_LEVEL:function(t,e){t.user.isAdmin=e},UPDATE_USERNAME:function(t,e){t.user.username=e},UPDATE_UID:function(t,e){t.user.uid=e},UPDATE_PUSHNOTIFICATIONSENABLE:function(t,e){t.user.push_notifications_enable=e}},dr={updateUserLevel:function(t,e){t.commit("UPDATE_USER_LEVEL",e)},updateUsername:function(t,e){t.commit("UPDATE_USERNAME",e)},updateUID:function(t,e){t.commit("UPDATE_UID",e)},updatePushNotificationsEnable:function(t,e){t.commit("UPDATE_PUSHNOTIFICATIONSENABLE",e)}},ur={state:lr,mutations:cr,actions:dr};i["default"].use(c["a"]);var pr=new c["a"].Store({state:or,mutations:sr,actions:rr,modules:{users:ur}});i["default"].use(_["a"]);var mr=new _["a"]({mode:"history",routes:nr,linkActiveClass:"active"});mr.beforeEach(function(t,e,a){var i=r.a.auth().currentUser,n=pr.state.users.user.isAdmin,o=t.matched.some(function(t){return t.meta.requiresAuth}),s=t.matched.some(function(t){return t.meta.requiresAdmin});o&&!i?a("/login"):s&&!n?a("/login"):a()});var fr=mr,hr=a("bm7V"),vr=a.n(hr),gr=a("7VfX"),br=a.n(gr),Cr=a("1SRG"),wr=a.n(Cr),_r={install:function(t){t.component("ss-fg-input",ie),t.component("drop-down",me),t.component("card",aa),t.component("p-button",He)}},yr=_r,$r=a("WEHx"),xr={install:function(t){t.directive("click-outside",$r["directive"])}},kr=xr,Tr=(a("MU8w"),a("Jmt5"),a("MAOu"),a("2N7h"),a("OGo5"),{install:function(t){t.use(yr),t.use(kr),t.use(ei),t.use(wr.a)}}),Lr=(a("p4sG"),function(){var t={apiKey:"AIzaSyDUC-1jgGVRbBsByLvbGJrtkO_R5pjxJ70",databaseURL:"https://ss-beta.firebaseio.com",projectId:"ss-beta",storageBucket:"ss-beta.appspot.com",messagingSenderId:"742012394729"};r.a.initializeApp(t)}),Pr=function(){"serviceWorker"in navigator&&(navigator.serviceWorker.controller?console.log("service worker already installed"):navigator.serviceWorker.register("/stresscan-sw.js").then(function(t){console.log("SW registration succeeded. Scope is "+t.scope),r.a.messaging().useServiceWorker(t)}).catch(function(t){console.error("SW registration failed with error "+t)}))};Pr(),Lr(),i["default"].use(Ai.a),i["default"].use(vr.a,{container:".main-panel",duration:500,easing:"ease"}),i["default"].use(br.a,{okText:"Confirmar",cancelText:"Cancelar",animation:"fade"}),i["default"].use(Tr),new i["default"]({router:fr,store:pr,render:function(t){return t(w)}}).$mount("#app")},OGo5:function(t,e){},OqpP:function(t,e){},SenD:function(t,e){},TUTV:function(t,e){},Vdai:function(t,e){},XDue:function(t,e){},"XWz/":function(t,e){},XvZZ:function(t,e){},YIr9:function(t,e){},azWw:function(t,e){},bbuP:function(t,e){},d371:function(t,e){},"dLd/":function(t,e,a){t.exports=a.p+"img/logo.3cc98cff.png"},drn2:function(t,e){},"iUT/":function(t,e){},kXU6:function(t,e){},p4sG:function(t,e){},wRDj:function(t,e){},xB5m:function(t,e){},yAKT:function(t,e){},ymRh:function(t,e){}},[0]);
//# sourceMappingURL=app.b6ed66db.js.map